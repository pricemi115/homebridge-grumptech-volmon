import*as e from"os";import*as t from"fs/promises";import*as r from"fs";import*as n from"child_process";import*as i from"buffer";var o={742:(e,t)=>{t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=c(e),s=o[0],a=o[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),u=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(l(e,a,a+s>c?c:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},227:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},187:e=>{var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,s,l;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function f(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=m(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},824:e=>{var t=1e3,r=60*t,n=60*r,i=24*n;function o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=n?o(a,c,n,"hour"):c>=r?o(a,c,r,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},78:(e,t,r)=>{var n=r(518);Object.keys(n).forEach((function(e){t[e]=n[e]}));var i=r(941);Object.keys(i).forEach((function(e){t[e]=i[e]}))},941:(e,t,r)=>{var n=r(742),i=r(532);t.build=function(e,t){var r={version:"1.0",encoding:"UTF-8"},n="-//Apple//DTD PLIST 1.0//EN",o="http://www.apple.com/DTDs/PropertyList-1.0.dtd",s=i.create("plist");return s.dec(r.version,r.encoding,r.standalone),s.dtd(n,o),s.att("version","1.0"),a(e,s),t||(t={}),t.pretty=!1!==t.pretty,s.end(t)};var o=Object.prototype.toString;function s(e){var t=o.call(e).match(/\[object (.*)\]/);return t?t[1]:t}function a(e,t){var r,i,o,c=s(e);if("Undefined"!=c)if(Array.isArray(e))for(t=t.ele("array"),i=0;i<e.length;i++)a(e[i],t);else if(Buffer.isBuffer(e))t.ele("data").raw(e.toString("base64"));else if("Object"==c)for(o in t=t.ele("dict"),e)e.hasOwnProperty(o)&&(t.ele("key").txt(o),a(e[o],t));else"Number"==c?(r=e%1==0?"integer":"real",t.ele(r).txt(e.toString())):"Date"==c?t.ele("date").txt(function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}(new Date(e))):"Boolean"==c?t.ele(e?"true":"false"):"String"==c?t.ele("string").txt(e):"ArrayBuffer"==c?t.ele("data").raw(n.fromByteArray(e)):e&&e.buffer&&"ArrayBuffer"==s(e.buffer)?t.ele("data").raw(n.fromByteArray(new Uint8Array(e.buffer),t)):"Null"===c&&t.ele("null").txt("")}},518:(e,t,r)=>{var n=r(470).a;function i(e){return 3===e.nodeType||8===e.nodeType||4===e.nodeType}function o(e){return!e.childNodes||0===e.childNodes.length}function s(e,t){if(!e)throw new Error(t)}function a(e){var t,r,n,c,l,u;if(!e)return null;if("plist"===e.nodeName){if(c=[],o(e))return c;for(t=0;t<e.childNodes.length;t++)i(e.childNodes[t])||c.push(a(e.childNodes[t]));return c}if("dict"===e.nodeName){if(r={},n=null,u=0,o(e))return r;for(t=0;t<e.childNodes.length;t++)i(e.childNodes[t])||(u%2==0?(s("key"===e.childNodes[t].nodeName,"Missing key while parsing <dict/>."),n=a(e.childNodes[t])):(s("key"!==e.childNodes[t].nodeName,'Unexpected key "'+a(e.childNodes[t])+'" while parsing <dict/>.'),r[n]=a(e.childNodes[t])),u+=1);return u%2==1&&(r[n]=""),r}if("array"===e.nodeName){if(c=[],o(e))return c;for(t=0;t<e.childNodes.length;t++)i(e.childNodes[t])||null!=(l=a(e.childNodes[t]))&&c.push(l);return c}if("#text"!==e.nodeName){if("key"===e.nodeName)return o(e)?"":(s("__proto__"!==e.childNodes[0].nodeValue,"__proto__ keys can lead to prototype pollution. More details on CVE-2022-22912"),e.childNodes[0].nodeValue);if("string"===e.nodeName){if(l="",o(e))return l;for(t=0;t<e.childNodes.length;t++){var h;3!==(h=e.childNodes[t].nodeType)&&4!==h||(l+=e.childNodes[t].nodeValue)}return l}if("integer"===e.nodeName)return s(!o(e),'Cannot parse "" as integer.'),parseInt(e.childNodes[0].nodeValue,10);if("real"===e.nodeName){for(s(!o(e),'Cannot parse "" as real.'),l="",t=0;t<e.childNodes.length;t++)3===e.childNodes[t].nodeType&&(l+=e.childNodes[t].nodeValue);return parseFloat(l)}if("data"===e.nodeName){if(l="",o(e))return Buffer.from(l,"base64");for(t=0;t<e.childNodes.length;t++)3===e.childNodes[t].nodeType&&(l+=e.childNodes[t].nodeValue.replace(/\s+/g,""));return Buffer.from(l,"base64")}if("date"===e.nodeName)return s(!o(e),'Cannot parse "" as Date.'),new Date(e.childNodes[0].nodeValue);if("null"===e.nodeName)return null;if("true"===e.nodeName)return!0;if("false"===e.nodeName)return!1;throw new Error("Invalid PLIST tag "+e.nodeName)}}t.parse=function(e){var t=(new n).parseFromString(e);s("plist"===t.documentElement.nodeName,"malformed document. First element should be <plist>");var r=a(t.documentElement);return 1==r.length&&(r=r[0]),r}},470:(e,t,r)=>{function n(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function a(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var r=this.options,n=new h,o=r.domBuilder||new i,a=r.errorHandler,c=r.locator,u=r.xmlns||{},d=/\/x?html?$/.test(t),p=d?l.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&o.setDocumentLocator(c),n.errorHandler=function(e,t,r){if(!e){if(t instanceof i)return t;e=t}var n={},o=e instanceof Function;function a(t){var i=e[t];!i&&o&&(i=2==e.length?function(r){e(t,r)}:e),n[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+s(r))}||function(){}}return r=r||{},a("warning"),a("error"),a("fatalError"),n}(a,o,c),n.domBuilder=r.domBuilder||o,d&&(u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e&&"string"==typeof e?n.parse(e,u,p):n.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new p).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,s=i.createElementNS(e,r||t),a=n.length;c(this,s),this.currentElement=s,this.locator&&o(this.locator,s);for(var l=0;l<a;l++){e=n.getURI(l);var u=n.getValue(l),h=(r=n.getQName(l),i.createAttributeNS(e,r));this.locator&&o(n.getLocator(l),h),h.value=h.nodeValue=u,s.setAttributeNode(h)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,r),c(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=a.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&o(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=a.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&o(this.locator,n),c(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&o(this.locator,i),c(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,s(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,s(this.locator))},fatalError:function(e){throw new d(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var l=r(444),u=r(552),h=u.XMLReader,d=u.ParseError,p=r(457).DOMImplementation;r(457),t.a=n},457:(e,t)=>{function r(e,t){for(var r in e)t[r]=e[r]}function n(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,r(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var i={},o=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,a=i.TEXT_NODE=3,c=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,u=i.ENTITY_NODE=6,h=i.PROCESSING_INSTRUCTION_NODE=7,d=i.COMMENT_NODE=8,p=i.DOCUMENT_NODE=9,m=i.DOCUMENT_TYPE_NODE=10,f=i.DOCUMENT_FRAGMENT_NODE=11,g=i.NOTATION_NODE=12,y={},w={},v=(y.INDEX_SIZE_ERR=(w[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),b=(y.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),y.NOT_FOUND_ERR=(w[8]="Not found",8)),_=(y.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));function C(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,w[e]),this.message=w[e],Error.captureStackTrace&&Error.captureStackTrace(this,C);return r.code=e,t&&(this.message=this.message+": "+t),r}function E(){}function N(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);re(e,"length",n.length),r(n,e),e._inc=t}}function D(){}function I(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function T(e,t,r,n){if(n?t[I(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&j(i,e,n),function(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(i,e,r))}}function S(e,t,r){var n=I(t,r);if(!(n>=0))throw C(b,new Error(e.tagName+"@"+r));for(var i=t.length-1;n<i;)t[n]=t[++n];if(t.length=i,e){var o=e.ownerDocument;o&&(j(o,e,r),r.ownerElement=null)}}function x(e){if(this._features={},e)for(var t in e)this._features=e[t]}function A(){}function P(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function F(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(F(e,t))return!0}while(e=e.nextSibling)}function k(){}function j(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function L(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o}}}function R(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,L(e.ownerDocument,e),t}function M(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===f){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var s=r?r.previousSibling:e.lastChild;i.previousSibling=s,o.nextSibling=r,s?s.nextSibling=i:e.firstChild=i,null==r?e.lastChild=o:r.previousSibling=o;do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));return L(e.ownerDocument||e,e),t.nodeType==f&&(t.firstChild=t.lastChild=null),t}function $(){this._nsMap={}}function V(){}function B(){}function U(){}function z(){}function q(){}function W(){}function Y(){}function H(){}function Z(){}function G(){}function K(){}function X(e,t){var r=[],n=9==this.nodeType&&this.documentElement||this,i=n.prefix,o=n.namespaceURI;if(o&&null==i&&null==(i=n.lookupPrefix(o)))var s=[{namespace:o,prefix:null}];return Q(this,r,e,t,s),r.join("")}function J(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!n&&!i)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=r.length;o--;){var s=r[o];if(s.prefix==n)return s.namespace!=i}return!0}function Q(e,t,r,n,i){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:i||(i=[]),i.length;var u=e.attributes,g=u.length,y=e.firstChild,w=e.tagName;r="http://www.w3.org/1999/xhtml"===e.namespaceURI||r,t.push("<",w);for(var v=0;v<g;v++)"xmlns"==(b=u.item(v)).prefix?i.push({prefix:b.localName,namespace:b.value}):"xmlns"==b.nodeName&&i.push({prefix:"",namespace:b.value});for(v=0;v<g;v++){var b;if(J(b=u.item(v),0,i)){var _=b.prefix||"",C=b.namespaceURI,E=_?" xmlns:"+_:" xmlns";t.push(E,'="',C,'"'),i.push({prefix:_,namespace:C})}Q(b,t,r,n,i)}if(J(e,0,i)&&(_=e.prefix||"",(C=e.namespaceURI)&&(E=_?" xmlns:"+_:" xmlns",t.push(E,'="',C,'"'),i.push({prefix:_,namespace:C}))),y||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(w)){if(t.push(">"),r&&/^script$/i.test(w))for(;y;)y.data?t.push(y.data):Q(y,t,r,n,i),y=y.nextSibling;else for(;y;)Q(y,t,r,n,i),y=y.nextSibling;t.push("</",w,">")}else t.push("/>");return;case p:case f:for(y=e.firstChild;y;)Q(y,t,r,n,i),y=y.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,P),'"');case a:return t.push(e.data.replace(/[<&]/g,P).replace(/]]>/g,"]]&gt;"));case c:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case m:var N=e.publicId,O=e.systemId;if(t.push("<!DOCTYPE ",e.name),N)t.push(" PUBLIC ",N),O&&"."!=O&&t.push(" ",O),t.push(">");else if(O&&"."!=O)t.push(" SYSTEM ",O,">");else{var D=e.internalSubset;D&&t.push(" [",D,"]"),t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ee(e,t,r){var n;switch(t.nodeType){case o:(n=t.cloneNode(!1)).ownerDocument=e;case f:break;case s:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(ee(e,i,r)),i=i.nextSibling;return n}function te(e,t,r){var n=new t.constructor;for(var i in t){var a=t[i];"object"!=typeof a&&a!=n[i]&&(n[i]=a)}switch(t.childNodes&&(n.childNodes=new E),n.ownerDocument=e,n.nodeType){case o:var c=t.attributes,l=n.attributes=new D,u=c.length;l._ownerElement=n;for(var h=0;h<u;h++)n.setAttributeNode(te(e,c.item(h),!0));break;case s:r=!0}if(r)for(var d=t.firstChild;d;)n.appendChild(te(e,d,r)),d=d.nextSibling;return n}function re(e,t,r){e[t]=r}y.INVALID_STATE_ERR=(w[11]="Invalid state",11),y.SYNTAX_ERR=(w[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),y.NAMESPACE_ERR=(w[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(w[15]="Invalid access",15),C.prototype=Error.prototype,r(y,C),E.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)Q(this[n],r,e,t);return r.join("")}},N.prototype.item=function(e){return O(this),this[e]},n(N,E),D.prototype={length:0,item:E.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new C(_);var r=this.getNamedItem(e.nodeName);return T(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new C(_);return t=this.getNamedItemNS(e.namespaceURI,e.localName),T(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return S(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return S(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},x.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new k;if(n.implementation=this,n.childNodes=new E,n.doctype=r,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new W;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},A.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return M(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return R(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return te(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==a&&e.nodeType==a?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(i,A),r(i,A.prototype),k.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==f){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),M(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),R(this,e)},importNode:function(e,t){return ee(this,e,t)},getElementById:function(e){var t=null;return F(this.documentElement,(function(r){if(r.nodeType==o&&r.getAttribute("id")==e)return t=r,!0})),t},getElementsByClassName:function(e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return new N(this,(function(e){var r=[];return F(e.documentElement,(function(n){n!==e&&n.nodeType==o&&t.test(n.getAttribute("class"))&&r.push(n)})),r}))},createElement:function(e){var t=new $;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new E,(t.attributes=new D)._ownerElement=t,t},createDocumentFragment:function(){var e=new G;return e.ownerDocument=this,e.childNodes=new E,e},createTextNode:function(e){var t=new U;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new z;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new K;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new V;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Z;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new $,n=t.split(":"),i=r.attributes=new D;return r.childNodes=new E,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new V,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},n(k,A),$.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===f?this.insertBefore(e,null):function(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,L(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new N(this,(function(t){var r=[];return F(t,(function(n){n===t||n.nodeType!=o||"*"!==e&&n.tagName!=e||r.push(n)})),r}))},getElementsByTagNameNS:function(e,t){return new N(this,(function(r){var n=[];return F(r,(function(i){i===r||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||n.push(i)})),n}))}},k.prototype.getElementsByTagName=$.prototype.getElementsByTagName,k.prototype.getElementsByTagNameNS=$.prototype.getElementsByTagNameNS,n($,A),V.prototype.nodeType=s,n(V,A),B.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(w[v])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},n(B,A),U.prototype={nodeName:"#text",nodeType:a,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n(U,B),z.prototype={nodeName:"#comment",nodeType:d},n(z,B),q.prototype={nodeName:"#cdata-section",nodeType:c},n(q,B),W.prototype.nodeType=m,n(W,A),Y.prototype.nodeType=g,n(Y,A),H.prototype.nodeType=u,n(H,A),Z.prototype.nodeType=l,n(Z,A),G.prototype.nodeName="#document-fragment",G.prototype.nodeType=f,n(G,A),K.prototype.nodeType=h,n(K,A),A.prototype.toString=X;try{if(Object.defineProperty){function ne(e){switch(e.nodeType){case o:case f:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(ne(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(N.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(A.prototype,"textContent",{get:function(){return ne(this)},set:function(e){switch(this.nodeType){case o:case f:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),re=function(e,t,r){e["$$"+t]=r}}}catch(ie){}t.DOMImplementation=x},444:(e,t)=>{t.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}},552:(e,t)=>{var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$");function o(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function s(){}function a(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,r,n,i,o){function s(e,t,n){e in r.attributeNames&&o.fatalError("Attribute "+e+" redefined"),r.addValue(e,t,n)}for(var a,c=++t,l=0;;){var u=e.charAt(c);switch(u){case"=":if(1===l)a=e.slice(t,c),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(o.warning('attribute value must after "="'),a=e.slice(t,c)),t=c+1,!((c=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");s(a,h=e.slice(t,c).replace(/&#?\w+;/g,i),t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');s(a,h=e.slice(t,c).replace(/&#?\w+;/g,i),t),o.warning('attribute "'+a+'" missed start quot('+u+")!!"),t=c+1,l=5}break;case"/":switch(l){case 0:r.setTagName(e.slice(t,c));case 5:case 6:case 7:l=7,r.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==l&&r.setTagName(e.slice(t,c)),c;case">":switch(l){case 0:r.setTagName(e.slice(t,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=e.slice(t,c)).slice(-1)&&(r.closed=!0,h=h.slice(0,-1));case 2:2===l&&(h=a),4==l?(o.warning('attribute "'+h+'" missed quot(")!'),s(a,h.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===n[""]&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),s(h,h,t));break;case 3:throw new Error("attribute value missed!!")}return c;case"":u=" ";default:if(u<=" ")switch(l){case 0:r.setTagName(e.slice(t,c)),l=6;break;case 1:a=e.slice(t,c),l=2;break;case 4:var h=e.slice(t,c).replace(/&#?\w+;/g,i);o.warning('attribute "'+h+'" missed quot(")!!'),s(a,h,t);case 5:l=6}else switch(l){case 2:r.tagName,"http://www.w3.org/1999/xhtml"===n[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),s(a,a,t),t=c,l=1;break;case 5:o.warning('attribute space is required"'+a+'"!!');case 6:l=1,t=c;break;case 3:l=4,t=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function l(e,t,r){for(var n=e.tagName,i=null,o=e.length;o--;){var s=e[o],a=s.qName,c=s.value;if((p=a.indexOf(":"))>0)var l=s.prefix=a.slice(0,p),u=a.slice(p+1),h="xmlns"===l&&u;else u=a,l=null,h="xmlns"===a&&"";s.localName=u,!1!==h&&(null==i&&(i={},d(r,r={})),r[h]=i[h]=c,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,c))}for(o=e.length;o--;)(l=(s=e[o]).prefix)&&("xml"===l&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(s.uri=r[l||""]));var p;(p=n.indexOf(":"))>0?(l=e.prefix=n.slice(0,p),u=e.localName=n.slice(p+1)):(l=null,u=e.localName=n);var m=e.uri=r[l||""];if(t.startElement(m,u,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=i,!0;if(t.endElement(m,u,n),i)for(l in i)t.endPrefixMapping(l)}function u(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),s=e.substring(t+1,o);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),o)}return t+1}function h(e,t,r,n){var i=n[r];return null==i&&((i=e.lastIndexOf("</"+r+">"))<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}function d(e,t){for(var r in e)t[r]=e[r]}function p(e,t,r,n){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,i-t-4),i+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,i-t-9),r.endCDATA(),i+3}var o=function(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);r=i.exec(e);)if(n.push(r),r[1])return n}(e,t),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var a=o[1][0],c=!1,l=!1;s>3&&(/^public$/i.test(o[2][0])?(c=o[3][0],l=s>4&&o[4][0]):/^system$/i.test(o[2][0])&&(l=o[3][0]));var u=o[s-1];return r.startDTD(a,c,l),r.endDTD(),u.index+u[0].length}return-1}function m(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function f(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,s.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),d(t,t={}),function(e,t,r,n,i){function s(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function d(t){if(t>E){var r=e.substring(E,t).replace(/&#?\w+;/g,s);b&&g(E),n.characters(r,0,t-E),E=t}}function g(t,r){for(;t>=w&&(r=v.exec(e));)y=r.index,w=y+r[0].length,b.lineNumber++;b.columnNumber=t-y+1}for(var y=0,w=0,v=/.*(?:\r\n?|\n)|.*$/g,b=n.locator,_=[{currentNSMap:t}],C={},E=0;;){try{var N=e.indexOf("<",E);if(N<0){if(!e.substr(E).match(/^\s*$/)){var O=n.doc,D=O.createTextNode(e.substr(E));O.appendChild(D),n.currentElement=D}return}switch(N>E&&d(N),e.charAt(N+1)){case"/":var I=e.indexOf(">",N+3),T=e.substring(N+2,I),S=_.pop();I<0?(T=e.substring(N+2).replace(/[\s<].*/,""),i.error("end tag name: "+T+" is not complete:"+S.tagName),I=N+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),i.error("end tag name: "+T+" maybe not complete"),I=N+1+T.length);var x=S.localNSMap,A=S.tagName==T;if(A||S.tagName&&S.tagName.toLowerCase()==T.toLowerCase()){if(n.endElement(S.uri,S.localName,T),x)for(var P in x)n.endPrefixMapping(P);A||i.fatalError("end tag name: "+T+" is not match the current start tagName:"+S.tagName)}else _.push(S);I++;break;case"?":b&&g(N),I=m(e,N,n);break;case"!":b&&g(N),I=p(e,N,n,i);break;default:b&&g(N);var F=new f,k=_[_.length-1].currentNSMap,j=(I=c(e,N,F,k,s,i),F.length);if(!F.closed&&h(e,I,F.tagName,C)&&(F.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),b&&j){for(var L=a(b,{}),R=0;R<j;R++){var M=F[R];g(M.offset),M.locator=a(b,{})}n.locator=L,l(F,n,k)&&_.push(F),n.locator=b}else l(F,n,k)&&_.push(F);"http://www.w3.org/1999/xhtml"!==F.uri||F.closed?I++:I=u(e,I,F.tagName,s,n)}}catch(e){if(e instanceof o)throw e;i.error("element parse error: "+e),I=-1}I>E?E=I:d(Math.max(N,E)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},f.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!i.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=s,t.ParseError=o},557:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},335:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},369:function(e){(function(){var t,r,n,i,o,s,a,c={}.hasOwnProperty;t=function(e,...t){var r,n,i,s;if(o(Object.assign))Object.assign.apply(null,arguments);else for(r=0,i=t.length;r<i;r++)if(null!=(s=t[r]))for(n in s)c.call(s,n)&&(e[n]=s[n]);return e},o=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},s=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},n=function(e){return o(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},i=function(e){var t;if(n(e))return!e.length;for(t in e)if(c.call(e,t))return!1;return!0},a=function(e){var t,r;return s(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return o(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=o,e.exports.isObject=s,e.exports.isArray=n,e.exports.isEmpty=i,e.exports.isPlainObject=a,e.exports.getValue=r}).call(this)},594:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},750:function(e,t,r){(function(){var t;t=r(335),r(26),e.exports=function(){class e{constructor(e,r,n){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))}debugInfo(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"}isEqualNode(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value}}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e}.call(this)}).call(this)},170:function(e,t,r){(function(){var t,n;t=r(335),n=r(488),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))}}}).call(this)},488:function(e,t,r){(function(){var t;t=r(26),e.exports=function(){class e extends t{constructor(e){super(e),this.value=""}clone(){return Object.create(this)}substringData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){return!!super.isEqualNode(e)&&e.data===this.data}}return Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),e}.call(this)}).call(this)},96:function(e,t,r){(function(){var t,n;t=r(335),n=r(488),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))}}}).call(this)},383:function(e,t,r){(function(){var t,n;t=r(933),n=r(210),e.exports=function(){class e{constructor(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}getParameter(e){return this.params.hasOwnProperty(e)?this.params[e]:null}canSetParameter(e,t){return!0}setParameter(e,t){return null!=t?this.params[e]=t:delete this.params[e]}}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new n(Object.keys(this.defaultParams))}}),e}.call(this)}).call(this)},933:function(e){(function(){e.exports=class{constructor(){}handleError(e){throw new Error(e)}}}).call(this)},770:function(e){(function(){e.exports=class{hasFeature(e,t){return!0}createDocumentType(e,t,r){throw new Error("This DOM method is not implemented.")}createDocument(e,t,r){throw new Error("This DOM method is not implemented.")}createHTMLDocument(e){throw new Error("This DOM method is not implemented.")}getFeature(e,t){throw new Error("This DOM method is not implemented.")}}}).call(this)},210:function(e){(function(){e.exports=function(){class e{constructor(e){this.arr=e||[]}item(e){return this.arr[e]||null}contains(e){return-1!==this.arr.indexOf(e)}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e}.call(this)}).call(this)},179:function(e,t,r){(function(){var t,n;n=r(26),t=r(335),e.exports=class extends n{constructor(e,r,n,i,o,s){if(super(e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==n)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!i)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(s&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(n),this.attributeType=this.stringify.dtdAttType(i),s&&(this.defaultValue=this.stringify.dtdAttDefault(s)),this.defaultValueType=o}toString(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))}}}).call(this)},347:function(e,t,r){(function(){var t,n;n=r(26),t=r(335),e.exports=class extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(n)}toString(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))}}}).call(this)},580:function(e,t,r){(function(){var t,n,i;({isObject:i}=r(369)),n=r(26),t=r(335),e.exports=function(){class e extends n{constructor(e,r,n,o){if(super(e),null==n)throw new Error("Missing DTD entity name. "+this.debugInfo(n));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(n));if(this.pe=!!r,this.name=this.stringify.name(n),this.type=t.EntityDeclaration,i(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(n));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(n));if(this.internal=!1,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(n))}else this.value=this.stringify.dtdEntityValue(o),this.internal=!0}toString(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e}.call(this)}).call(this)},777:function(e,t,r){(function(){var t,n;n=r(26),t=r(335),e.exports=function(){class e extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}toString(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),e}.call(this)}).call(this)},77:function(e,t,r){(function(){var t,n,i;({isObject:i}=r(369)),n=r(26),t=r(335),e.exports=class extends n{constructor(e,r,n,o){super(e),i(r)&&({version:r,encoding:n,standalone:o}=r),r||(r="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(r),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}toString(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))}}}).call(this)},544:function(e,t,r){(function(){var t,n,i,o,s,a,c,l;({isObject:l}=r(369)),c=r(26),t=r(335),n=r(179),o=r(580),i=r(347),s=r(777),a=r(663),e.exports=function(){class e extends c{constructor(e,r,n){var i,o,s,a;if(super(e),this.type=t.DocType,e.children)for(o=0,s=(a=e.children).length;o<s;o++)if((i=a[o]).type===t.Element){this.name=i.name;break}this.documentObject=e,l(r)&&({pubID:r,sysID:n}=r),null==n&&([n,r]=[r,n]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}element(e,t){var r;return r=new i(this,e,t),this.children.push(r),this}attList(e,t,r,i,o){var s;return s=new n(this,e,t,r,i,o),this.children.push(s),this}entity(e,t){var r;return r=new o(this,!1,e,t),this.children.push(r),this}pEntity(e,t){var r;return r=new o(this,!0,e,t),this.children.push(r),this}notation(e,t){var r;return r=new s(this,e,t),this.children.push(r),this}toString(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))}ele(e,t){return this.element(e,t)}att(e,t,r,n,i){return this.attList(e,t,r,n,i)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}up(){return this.root()||this.documentObject}isEqualNode(e){return!!super.isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId}}return Object.defineProperty(e.prototype,"entities",{get:function(){var e,r,n,i,o;for(i={},r=0,n=(o=this.children).length;r<n;r++)(e=o[r]).type!==t.EntityDeclaration||e.pe||(i[e.name]=e);return new a(i)}}),Object.defineProperty(e.prototype,"notations",{get:function(){var e,r,n,i,o;for(i={},r=0,n=(o=this.children).length;r<n;r++)(e=o[r]).type===t.NotationDeclaration&&(i[e.name]=e);return new a(i)}}),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},934:function(e,t,r){(function(){var t,n,i,o,s,a,c;({isPlainObject:c}=r(369)),i=r(770),n=r(383),o=r(26),t=r(335),a=r(549),s=r(434),e.exports=function(){class e extends o{constructor(e){super(null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new n,e||(e={}),e.writer||(e.writer=new s),this.options=e,this.stringify=new a(e)}end(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))}toString(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))}createElement(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"implementation",{value:new i}),Object.defineProperty(e.prototype,"doctype",{get:function(){var e,r,n,i;for(r=0,n=(i=this.children).length;r<n;r++)if((e=i[r]).type===t.DocType)return e;return null}}),Object.defineProperty(e.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(e.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(e.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(e.prototype,"origin",{get:function(){return null}}),Object.defineProperty(e.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(e.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(e.prototype,"contentType",{get:function(){return null}}),e}.call(this)}).call(this)},505:function(e,t,r){(function(){var t,n,i,o,s,a,c,l,u,h,d,p,m,f,g,y,w,v,b,_,C,E,N={}.hasOwnProperty;({isObject:C,isFunction:_,isPlainObject:E,getValue:b}=r(369)),t=r(335),p=r(934),m=r(161),o=r(170),s=r(96),g=r(406),v=r(595),f=r(181),h=r(77),d=r(544),a=r(179),l=r(580),c=r(347),u=r(777),i=r(750),w=r(549),y=r(434),n=r(594),e.exports=class{constructor(e,r,n){var i;this.name="?xml",this.type=t.Document,e||(e={}),i={},e.writer?E(e.writer)&&(i=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new w(e),this.onDataCallback=r||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(e){var r,n,i,o,s,a,c,l;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(n in i={},c=e.attribs)N.call(c,n)&&(r=c[n],i[n]=r.value);this.node(e.name,i);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(s=0,a=(l=e.children).length;s<a;s++)o=l[s],this.createChildNode(o),o.type===t.Element&&this.up();return this}dummy(){return this}node(e,t,r){if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=b(e),null==t&&(t={}),t=b(t),C(t)||([r,t]=[t,r]),this.currentNode=new m(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this}element(e,r,n){var i,o,s,a,c,l;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement(...arguments);else if(Array.isArray(e)||C(e)||_(e))for(a=this.options.noValidation,this.options.noValidation=!0,(l=new p(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=a,o=0,s=(c=l.children).length;o<s;o++)i=c[o],this.createChildNode(i),i.type===t.Element&&this.up();else this.node(e,r,n);return this}attribute(e,t){var r,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=b(e)),C(e))for(r in e)N.call(e,r)&&(n=e[r],this.attribute(r,n));else _(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new i(this,e,""):null!=t&&(this.currentNode.attribs[e]=new i(this,e,t));return this}text(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(e){var t;return this.openCurrent(),t=new s(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(e){var t;return this.openCurrent(),t=new g(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(e,t){var r,n,i,o,s;if(this.openCurrent(),null!=e&&(e=b(e)),null!=t&&(t=b(t)),Array.isArray(e))for(r=0,o=e.length;r<o;r++)n=e[r],this.instruction(n);else if(C(e))for(n in e)N.call(e,n)&&(i=e[n],this.instruction(n,i));else _(t)&&(t=t.apply()),s=new f(this,e,t),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(e,t,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return n=new h(this,e,t,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(e,t){var r;return this.openCurrent(),r=new c(this,e,t),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(e,t,r,n,i){var o;return this.openCurrent(),o=new a(this,e,t,r,n,i),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(e,t){var r;return this.openCurrent(),r=new l(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(e,t){var r;return this.openCurrent(),r=new l(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(e,t){var r;return this.openCurrent(),r=new u(this,e,t),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(e){var r,i,o,s;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),i="",e.type===t.Element){for(o in this.writerOptions.state=n.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,s=e.attribs)N.call(s,o)&&(r=s[o],i+=this.writer.attribute(r,this.writerOptions,this.currentLevel));i+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=n.InsideTag}else this.writerOptions.state=n.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.children?(i+=" [",this.writerOptions.state=n.InsideTag):(this.writerOptions.state=n.CloseTag,i+=">"),i+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),e.isOpen=!0}}closeNode(e){var r;if(!e.isClosed)return"",this.writerOptions.state=n.CloseTag,r=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=n.None,this.onData(r,this.currentLevel),e.isClosed=!0}onData(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(e){return null==e?"":"node: <"+e+">"}ele(){return this.element(...arguments)}nod(e,t,r){return this.node(e,t,r)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}dec(e,t,r){return this.declaration(e,t,r)}dtd(e,t,r){return this.doctype(e,t,r)}e(e,t,r){return this.element(e,t,r)}n(e,t,r){return this.node(e,t,r)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}att(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}}}).call(this)},833:function(e,t,r){(function(){var t,n;n=r(26),t=r(335),e.exports=class extends n{constructor(e){super(e),this.type=t.Dummy}clone(){return Object.create(this)}toString(e){return""}}}).call(this)},161:function(e,t,r){(function(){var t,n,i,o,s,a,c,l={}.hasOwnProperty;({isObject:c,isFunction:a,getValue:s}=r(369)),o=r(26),t=r(335),n=r(750),i=r(663),e.exports=function(){class e extends o{constructor(e,r,n){var i,o,s,a;if(super(e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(o=0,s=(a=e.children).length;o<s;o++)if((i=a[o]).type===t.DocType){i.name=this.name;break}}clone(){var e,t,r,n;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},n=this.attribs)l.call(n,t)&&(e=n[t],r.attribs[t]=e.clone());return r.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)})),r}attribute(e,t){var r,i;if(null!=e&&(e=s(e)),c(e))for(r in e)l.call(e,r)&&(i=e[r],this.attribute(r,i));else a(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new n(this,e,""):null!=t&&(this.attribs[e]=new n(this,e,t));return this}removeAttribute(e){var t,r,n;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=s(e),Array.isArray(e))for(r=0,n=e.length;r<n;r++)t=e[r],delete this.attribs[t];else delete this.attribs[e];return this}toString(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}getAttribute(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null}setAttribute(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null}setAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(e){return this.attribs.hasOwnProperty(e)}hasAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t}setIdAttributeNS(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,r,n;if(!super.isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,n=this.attribs.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0}}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),e}.call(this)}).call(this)},663:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}getNamedItem(e){return this.nodes[e]}setNamedItem(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null}removeNamedItem(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null}item(e){return this.nodes[Object.keys(this.nodes)[e]]||null}getNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}setNamedItemNS(e){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e}.call(this)}).call(this)},26:function(e,t,r){(function(){var t,n,i,o,s,a,c,l,u,h,d,p,m,f,g,y,w={}.hasOwnProperty,v=[].splice;({isObject:y,isFunction:g,isEmpty:f,getValue:m}=r(369)),l=null,i=null,o=null,s=null,a=null,d=null,p=null,h=null,c=null,n=null,u=null,t=null,e.exports=function(){class e{constructor(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=r(161),i=r(170),o=r(96),s=r(77),a=r(544),d=r(406),p=r(595),h=r(181),c=r(833),n=r(335),u=r(390),r(663),t=r(557))}setParent(e){var t,r,n,i,o;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),o=[],r=0,n=(i=this.children).length;r<n;r++)t=i[r],o.push(t.setParent(this));return o}element(e,t,r){var n,i,o,s,a,c,l,u,h;if(c=null,null===t&&null==r&&([t,r]=[{},null]),null==t&&(t={}),t=m(t),y(t)||([r,t]=[t,r]),null!=e&&(e=m(e)),Array.isArray(e))for(o=0,l=e.length;o<l;o++)i=e[o],c=this.element(i);else if(g(e))c=this.element(e.apply());else if(y(e)){for(a in e)if(w.call(e,a))if(h=e[a],g(h)&&(h=h.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),h);else if(!this.options.separateArrayItems&&Array.isArray(h)&&f(h))c=this.dummy();else if(y(h)&&f(h))c=this.element(a);else if(this.options.keepNullNodes||null!=h)if(!this.options.separateArrayItems&&Array.isArray(h))for(s=0,u=h.length;s<u;s++)i=h[s],(n={})[a]=i,c=this.element(n);else y(h)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?c=this.element(h):(c=this.element(a)).element(h):c=this.element(a,h);else c=this.dummy()}else c=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c}insertBefore(e,t,r){var n,i,o,s,a;if(null!=e?e.type:void 0)return s=t,(o=e).setParent(this),s?(i=children.indexOf(s),a=children.splice(i),children.push(o),Array.prototype.push.apply(children,a)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,a),n}insertAfter(e,t,r){var n,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,o),n}remove(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),v.apply(this.parent.children,[e,e-e+1].concat([])),this.parent}node(e,t,r){var n;return null!=e&&(e=m(e)),t||(t={}),t=m(t),y(t)||([r,t]=[t,r]),n=new l(this,e,t),null!=r&&n.text(r),this.children.push(n),n}text(e){var t;return y(e)&&this.element(e),t=new p(this,e),this.children.push(t),this}cdata(e){var t;return t=new i(this,e),this.children.push(t),this}comment(e){var t;return t=new o(this,e),this.children.push(t),this}commentBefore(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this}commentAfter(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this}raw(e){var t;return t=new d(this,e),this.children.push(t),this}dummy(){return new c(this)}instruction(e,t){var r,n,i,o,s;if(null!=e&&(e=m(e)),null!=t&&(t=m(t)),Array.isArray(e))for(o=0,s=e.length;o<s;o++)r=e[o],this.instruction(r);else if(y(e))for(r in e)w.call(e,r)&&(n=e[r],this.instruction(r,n));else g(t)&&(t=t.apply()),i=new h(this,e,t),this.children.push(i);return this}instructionBefore(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this}instructionAfter(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this}declaration(e,t,r){var i,o;return i=this.document(),o=new s(i,e,t,r),0===i.children.length?i.children.unshift(o):i.children[0].type===n.Declaration?i.children[0]=o:i.children.unshift(o),i.root()||i}dtd(e,t){var r,i,o,s,c,l,u,h,d;for(r=this.document(),i=new a(r,e,t),o=s=0,l=(h=r.children).length;s<l;o=++s)if(h[o].type===n.DocType)return r.children[o]=i,i;for(o=c=0,u=(d=r.children).length;c<u;o=++c)if(d[o].isRoot)return r.children.splice(o,0,i),i;return r.children.push(i),i}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var e;for(e=this;e;){if(e.type===n.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}}document(){var e;for(e=this;e;){if(e.type===n.Document)return e;e=e.parent}}end(e){return this.document().end(e)}prev(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]}next(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]}importDocument(e){var t,r,i,o,s;if((r=e.root().clone()).parent=this,r.isRoot=!1,this.children.push(r),this.type===n.Document&&(r.isRoot=!0,r.documentObject=this,this.rootObject=r,this.children))for(i=0,o=(s=this.children).length;i<o;i++)if((t=s[i]).type===n.DocType){t.name=r.name;break}return this}debugInfo(e){var t,r;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""}ele(e,t,r){return this.element(e,t,r)}nod(e,t,r){return this.node(e,t,r)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}doc(){return this.document()}dec(e,t,r){return this.declaration(e,t,r)}e(e,t,r){return this.element(e,t,r)}n(e,t,r){return this.node(e,t,r)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}u(){return this.up()}importXMLBuilder(e){return this.importDocument(e)}attribute(e,t){throw new Error("attribute() applies to element nodes only.")}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}removeAttribute(e){throw new Error("attribute() applies to element nodes only.")}replaceChild(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return 0!==this.children.length}cloneNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(e,t){return!0}hasAttributes(){return 0!==this.attribs.length}compareDocumentPosition(e){var r,n;return(r=this)===e?0:this.document()!==e.document()?(n=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?n|=t.Preceding:n|=t.Following,n):r.isAncestor(e)?t.Contains|t.Preceding:r.isDescendant(e)?t.Contains|t.Following:r.isPreceding(e)?t.Preceding:t.Following}isSameNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,r,n;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=r=0,n=this.children.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0}getFeature(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(e){return!!e&&(e===this||this.isDescendant(e))}isDescendant(e){var t,r,n,i;for(r=0,n=(i=this.children).length;r<n;r++){if(e===(t=i[r]))return!0;if(t.isDescendant(e))return!0}return!1}isAncestor(e){return e.isDescendant(this)}isPreceding(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t<r}isFollowing(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t>r}treePosition(e){var t,r;return r=0,t=!1,this.foreachTreeNode(this.document(),(function(n){if(r++,!t&&n===e)return t=!0})),t?r:-1}foreachTreeNode(e,t){var r,n,i,o,s;for(e||(e=this.document()),n=0,i=(o=e.children).length;n<i;n++){if(s=t(r=o[n]))return s;if(s=this.foreachTreeNode(r,t))return s}}}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,r,i,o;if(this.nodeType===n.Element||this.nodeType===n.DocumentFragment){for(o="",t=0,r=(i=this.children).length;t<r;t++)(e=i[t]).textContent&&(o+=e.textContent);return o}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},390:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}item(e){return this.nodes[e]||null}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e}.call(this)}).call(this)},181:function(e,t,r){(function(){var t,n;t=r(335),n=r(488),e.exports=class extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,n&&(this.value=this.stringify.insValue(n))}clone(){return Object.create(this)}toString(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))}isEqualNode(e){return!!super.isEqualNode(e)&&e.target===this.target}}}).call(this)},406:function(e,t,r){(function(){var t,n;t=r(335),n=r(26),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))}}}).call(this)},996:function(e,t,r){(function(){var t,n,i,o={}.hasOwnProperty;t=r(335),i=r(751),n=r(594),e.exports=class extends i{constructor(e,t){super(t),this.stream=e}endline(e,t,r){return e.isLastRootNode&&t.state===n.CloseTag?"":super.endline(e,t,r)}document(e,t){var r,n,i,o,s,a,c,l,u;for(n=i=0,s=(c=e.children).length;i<s;n=++i)(r=c[n]).isLastRootNode=n===e.children.length-1;for(t=this.filterOptions(t),u=[],o=0,a=(l=e.children).length;o<a;o++)r=l[o],u.push(this.writeChildNode(r,t,0));return u}cdata(e,t,r){return this.stream.write(super.cdata(e,t,r))}comment(e,t,r){return this.stream.write(super.comment(e,t,r))}declaration(e,t,r){return this.stream.write(super.declaration(e,t,r))}docType(e,t,r){var i,o,s,a;if(r||(r=0),this.openNode(e,t,r),t.state=n.OpenTag,this.stream.write(this.indent(e,t,r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,r)),t.state=n.InsideTag,o=0,s=(a=e.children).length;o<s;o++)i=a[o],this.writeChildNode(i,t,r+1);t.state=n.CloseTag,this.stream.write("]")}return t.state=n.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,r)),t.state=n.None,this.closeNode(e,t,r)}element(e,r,i){var s,a,c,l,u,h,d,p,m,f,g,y,w,v;if(i||(i=0),this.openNode(e,r,i),r.state=n.OpenTag,m=this.indent(e,r,i)+"<"+e.name,r.pretty&&r.width>0)for(p in h=m.length,g=e.attribs)o.call(g,p)&&(s=g[p],h+(f=this.attribute(s,r,i)).length>r.width?(v=this.indent(e,r,i+1)+f,m+=this.endline(e,r,i)+v,h=v.length):(m+=v=" "+f,h+=v.length));else for(p in y=e.attribs)o.call(y,p)&&(s=y[p],m+=this.attribute(s,r,i));if(this.stream.write(m),l=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw||e.type===t.CData)&&""===e.value})))r.allowEmpty?(this.stream.write(">"),r.state=n.CloseTag,this.stream.write("</"+e.name+">")):(r.state=n.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(!r.pretty||1!==c||l.type!==t.Text&&l.type!==t.Raw&&l.type!==t.CData||null==l.value){for(this.stream.write(">"+this.endline(e,r,i)),r.state=n.InsideTag,u=0,d=(w=e.children).length;u<d;u++)a=w[u],this.writeChildNode(a,r,i+1);r.state=n.CloseTag,this.stream.write(this.indent(e,r,i)+"</"+e.name+">")}else this.stream.write(">"),r.state=n.InsideTag,r.suppressPrettyCount++,this.writeChildNode(l,r,i+1),r.suppressPrettyCount--,r.state=n.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,r,i)),r.state=n.None,this.closeNode(e,r,i)}processingInstruction(e,t,r){return this.stream.write(super.processingInstruction(e,t,r))}raw(e,t,r){return this.stream.write(super.raw(e,t,r))}text(e,t,r){return this.stream.write(super.text(e,t,r))}dtdAttList(e,t,r){return this.stream.write(super.dtdAttList(e,t,r))}dtdElement(e,t,r){return this.stream.write(super.dtdElement(e,t,r))}dtdEntity(e,t,r){return this.stream.write(super.dtdEntity(e,t,r))}dtdNotation(e,t,r){return this.stream.write(super.dtdNotation(e,t,r))}}}).call(this)},434:function(e,t,r){(function(){var t;t=r(751),e.exports=class extends t{constructor(e){super(e)}document(e,t){var r,n,i,o,s;for(t=this.filterOptions(t),o="",n=0,i=(s=e.children).length;n<i;n++)r=s[n],o+=this.writeChildNode(r,t,0);return t.pretty&&o.slice(-t.newline.length)===t.newline&&(o=o.slice(0,-t.newline.length)),o}}}).call(this)},549:function(e){(function(){var t={}.hasOwnProperty;e.exports=function(){class e{constructor(e){var r,n,i;for(r in this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),n=e.stringify||{})t.call(n,r)&&(i=n[r],this[r]=i)}name(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")}text(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))}cdata(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))}comment(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)}raw(e){return this.options.noValidation?e:""+e||""}attValue(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))}insTarget(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}insValue(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)}xmlVersion(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e}xmlEncoding(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)}xmlStandalone(e){return this.options.noValidation?e:e?"yes":"no"}dtdPubID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdSysID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdElementValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttType(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttDefault(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdEntityValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdNData(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}assertLegalChar(e){var t,r;if(this.options.noValidation)return e;if("1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,void 0!==this.options.invalidCharReplacement)e=e.replace(t,this.options.invalidCharReplacement);else if(r=e.match(t))throw new Error(`Invalid character in string: ${e} at index ${r.index}`)}else if("1.1"===this.options.version)if(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,void 0!==this.options.invalidCharReplacement)e=e.replace(t,this.options.invalidCharReplacement);else if(r=e.match(t))throw new Error(`Invalid character in string: ${e} at index ${r.index}`);return e}assertLegalName(e){var t;if(this.options.noValidation)return e;if(t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!(e=this.assertLegalChar(e)).match(t))throw new Error(`Invalid character in name: ${e}`);return e}textEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e}.call(this)}).call(this)},595:function(e,t,r){(function(){var t,n;t=r(335),n=r(488),e.exports=function(){class e extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))}splitText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"wholeText",{get:function(){var e,t,r;for(r="",t=this.previousSibling;t;)r=t.data+r,t=t.previousSibling;for(r+=this.data,e=this.nextSibling;e;)r+=e.data,e=e.nextSibling;return r}}),e}.call(this)}).call(this)},751:function(e,t,r){(function(){var t,n,i,o={}.hasOwnProperty;({assign:i}=r(369)),t=r(335),r(77),r(544),r(170),r(96),r(161),r(406),r(595),r(181),r(833),r(179),r(347),r(580),r(777),n=r(594),e.exports=class{constructor(e){var t,r,n;for(t in e||(e={}),this.options=e,r=e.writer||{})o.call(r,t)&&(n=r[t],this["_"+t]=this[t],this[t]=n)}filterOptions(e){var t,r,o,s,a,c,l,u,h;return e||(e={}),e=i({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(r=e.indent)?r:"  ",t.newline=null!=(o=e.newline)?o:"\n",t.offset=null!=(s=e.offset)?s:0,t.width=null!=(a=e.width)?a:0,t.dontPrettyTextNodes=null!=(c=null!=(l=e.dontPrettyTextNodes)?l:e.dontprettytextnodes)?c:0,t.spaceBeforeSlash=null!=(u=null!=(h=e.spaceBeforeSlash)?h:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=n.None,t}indent(e,t,r){var n;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(n=(r||0)+t.offset+1)>0?new Array(n).join(t.indent):""}endline(e,t,r){return!t.pretty||t.suppressPrettyCount?"":t.newline}attribute(e,t,r){var n;return this.openAttribute(e,t,r),n=t.pretty&&t.width>0?e.name+'="'+e.value+'"':" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,r),n}cdata(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<![CDATA[",t.state=n.InsideTag,i+=e.value,t.state=n.CloseTag,i+="]]>"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}comment(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"\x3c!-- ",t.state=n.InsideTag,i+=e.value,t.state=n.CloseTag,i+=" --\x3e"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}declaration(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<?xml",t.state=n.InsideTag,i+=' version="'+e.version+'"',null!=e.encoding&&(i+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(i+=' standalone="'+e.standalone+'"'),t.state=n.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}docType(e,t,r){var i,o,s,a,c;if(r||(r=0),this.openNode(e,t,r),t.state=n.OpenTag,a=this.indent(e,t,r),a+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?a+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(a+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(a+=" [",a+=this.endline(e,t,r),t.state=n.InsideTag,o=0,s=(c=e.children).length;o<s;o++)i=c[o],a+=this.writeChildNode(i,t,r+1);t.state=n.CloseTag,a+="]"}return t.state=n.CloseTag,a+=t.spaceBeforeSlash+">",a+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),a}element(e,r,i){var s,a,c,l,u,h,d,p,m,f,g,y,w,v,b,_,C,E;if(i||(i=0),g=!1,this.openNode(e,r,i),r.state=n.OpenTag,y=this.indent(e,r,i)+"<"+e.name,r.pretty&&r.width>0)for(f in d=y.length,v=e.attribs)o.call(v,f)&&(s=v[f],d+(w=this.attribute(s,r,i)).length>r.width?(E=this.indent(e,r,i+1)+w,y+=this.endline(e,r,i)+E,d=E.length):(y+=E=" "+w,d+=E.length));else for(f in b=e.attribs)o.call(b,f)&&(s=b[f],y+=this.attribute(s,r,i));if(l=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw||e.type===t.CData)&&""===e.value})))r.allowEmpty?(y+=">",r.state=n.CloseTag,y+="</"+e.name+">"+this.endline(e,r,i)):(r.state=n.CloseTag,y+=r.spaceBeforeSlash+"/>"+this.endline(e,r,i));else if(!r.pretty||1!==c||l.type!==t.Text&&l.type!==t.Raw&&l.type!==t.CData||null==l.value){if(r.dontPrettyTextNodes)for(u=0,p=(_=e.children).length;u<p;u++)if(((a=_[u]).type===t.Text||a.type===t.Raw||a.type===t.CData)&&null!=a.value){r.suppressPrettyCount++,g=!0;break}for(y+=">"+this.endline(e,r,i),r.state=n.InsideTag,h=0,m=(C=e.children).length;h<m;h++)a=C[h],y+=this.writeChildNode(a,r,i+1);r.state=n.CloseTag,y+=this.indent(e,r,i)+"</"+e.name+">",g&&r.suppressPrettyCount--,y+=this.endline(e,r,i),r.state=n.None}else y+=">",r.state=n.InsideTag,r.suppressPrettyCount++,g=!0,y+=this.writeChildNode(l,r,i+1),r.suppressPrettyCount--,g=!1,r.state=n.CloseTag,y+="</"+e.name+">"+this.endline(e,r,i);return this.closeNode(e,r,i),y}writeChildNode(e,r,n){switch(e.type){case t.CData:return this.cdata(e,r,n);case t.Comment:return this.comment(e,r,n);case t.Element:return this.element(e,r,n);case t.Raw:return this.raw(e,r,n);case t.Text:return this.text(e,r,n);case t.ProcessingInstruction:return this.processingInstruction(e,r,n);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,n);case t.DocType:return this.docType(e,r,n);case t.AttributeDeclaration:return this.dtdAttList(e,r,n);case t.ElementDeclaration:return this.dtdElement(e,r,n);case t.EntityDeclaration:return this.dtdEntity(e,r,n);case t.NotationDeclaration:return this.dtdNotation(e,r,n);default:throw new Error("Unknown XML node type: "+e.constructor.name)}}processingInstruction(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<?",t.state=n.InsideTag,i+=e.target,e.value&&(i+=" "+e.value),t.state=n.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}raw(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r),t.state=n.InsideTag,i+=e.value,t.state=n.CloseTag,i+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}text(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r),t.state=n.InsideTag,i+=e.value,t.state=n.CloseTag,i+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}dtdAttList(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<!ATTLIST",t.state=n.InsideTag,i+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(i+=" "+e.defaultValueType),e.defaultValue&&(i+=' "'+e.defaultValue+'"'),t.state=n.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}dtdElement(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<!ELEMENT",t.state=n.InsideTag,i+=" "+e.name+" "+e.value,t.state=n.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}dtdEntity(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<!ENTITY",t.state=n.InsideTag,e.pe&&(i+=" %"),i+=" "+e.name,e.value?i+=' "'+e.value+'"':(e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.nData&&(i+=" NDATA "+e.nData)),t.state=n.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}dtdNotation(e,t,r){var i;return this.openNode(e,t,r),t.state=n.OpenTag,i=this.indent(e,t,r)+"<!NOTATION",t.state=n.InsideTag,i+=" "+e.name,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?i+=' PUBLIC "'+e.pubID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),t.state=n.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),i}openNode(e,t,r){}closeNode(e,t,r){}openAttribute(e,t,r){}closeAttribute(e,t,r){}}}).call(this)},532:function(e,t,r){(function(){var t,n,i,o,s,a,c,l,u;({assign:l,isFunction:u}=r(369)),i=r(770),o=r(934),s=r(505),c=r(434),a=r(996),t=r(335),n=r(594),e.exports.create=function(e,t,r,n){var i,s;if(null==e)throw new Error("Root element needs a name.");return n=l({},t,r,n),s=(i=new o(n)).element(e),n.headless||(i.declaration(n),null==n.pubID&&null==n.sysID||i.dtd(n)),s},e.exports.begin=function(e,t,r){return u(e)&&([t,r]=[e,t],e={}),t?new s(e,t,r):new o(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new a(e,t)},e.exports.implementation=new i,e.exports.nodeType=t,e.exports.writerState=n}).call(this)}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return o[e].call(r.exports,r,r.exports,a),r.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var c={};(()=>{a.d(c,{Z:()=>re});var o=a(187),s=a(227);const l=(u={uptime:()=>e.uptime,userInfo:()=>e.userInfo},h={},a.d(h,u),h);var u,h;s("vol_data").log=console.log.bind(console);const d={TYPE_UNKNOWN:"unknown",TYPE_HFS_PLUS:"hfs",TYPE_APFS:"apfs",TYPE_UDF:"udf",TYPE_MSDOS:"msdos",TYPE_NTFS:"ntfs",TYPE_SMBFS:"smbfs",TYPE_EXT4:"ext4",TYPE_VFAT:"vfat"},p={BASE_2:2,BASE_10:10};class m{constructor(e){let t,r,n,i,o,s,a=d.TYPE_UNKNOWN,c=0,l=0,u=!1,h=!1,p=!1;if(void 0!==e){if("object"!=typeof e)throw new TypeError("'data' must be an object");if(Object.prototype.hasOwnProperty.call(e,"name")&&"string"==typeof e.name&&(t=e.name),Object.prototype.hasOwnProperty.call(e,"disk_id")&&"string"==typeof e.disk_id&&(r=e.disk_id),Object.prototype.hasOwnProperty.call(e,"volume_type")&&"string"==typeof e.volume_type){if(!Object.values(d).includes(e.volume_type))throw new RangeError(`Unrecognized volume type specified. (${e.volume_type})`);a=e.volume_type}if(Object.prototype.hasOwnProperty.call(e,"mount_point")&&"string"==typeof e.mount_point&&(n=e.mount_point),Object.prototype.hasOwnProperty.call(e,"capacity_bytes")&&"number"==typeof e.capacity_bytes){if(!(e.capacity_bytes>=0))throw new RangeError(`Volume capacity size must be greater than or equal to 0. (${e.capacity_bytes})`);c=e.capacity_bytes}if(Object.prototype.hasOwnProperty.call(e,"device_node")&&"string"==typeof e.device_node&&(i=e.device_node),Object.prototype.hasOwnProperty.call(e,"volume_uuid")&&"string"==typeof e.volume_uuid&&(o=e.volume_uuid),Object.prototype.hasOwnProperty.call(e,"free_space_bytes")&&"number"==typeof e.free_space_bytes){if(!(e.free_space_bytes>=0))throw new RangeError(`Volume free space size must be greater than or equal to 0. (${e.free_space_bytes})`);l=e.free_space_bytes}if(Object.prototype.hasOwnProperty.call(e,"used_space_bytes")&&"number"==typeof e.used_space_bytes){if(!(e.used_space_bytes>=0))throw new RangeError(`Volume used space size must be greater than or equal to 0. (${e.used_space_bytes})`);s=e.used_space_bytes}Object.prototype.hasOwnProperty.call(e,"visible")&&"boolean"==typeof e.visible&&(u=e.visible),Object.prototype.hasOwnProperty.call(e,"shown")&&"boolean"==typeof e.shown&&(h=e.shown),Object.prototype.hasOwnProperty.call(e,"low_space_alert")&&"boolean"==typeof e.low_space_alert&&(p=e.low_space_alert)}if(this._name=t,this._disk_identifier=r,this._volume_type=a,this._mount_point=n,this._capacity_bytes=c,this._device_node=i,this._volume_uuid=o,this._free_space_bytes=l,this._visible=u,this._shown=h,this._low_space_alert=p,this._used_space_bytes=void 0===s?c-l:s,this._used_space_bytes<0)throw new RangeError(`Used space cannot be negative. ${this._used_space_bytes}`)}get Name(){return this._name}get DiskId(){return this._disk_identifier}get VolumeType(){return this._volume_type}get MountPoint(){return this._mount_point}get DeviceNode(){return this._device_node}get VolumeUUID(){return this._volume_uuid}get Size(){return this._capacity_bytes}get FreeSpace(){return this._free_space_bytes}get UsedSpace(){return this._used_space_bytes}get IsMounted(){return void 0!==this._mount_point&&this._mount_point.length>0}get IsVisible(){return this._visible}get LowSpaceAlert(){return this._low_space_alert}get PercentFree(){return this.FreeSpace/this.Size*100}get IsShown(){return this._shown}IsMatch(e){return e instanceof m&&this.Name===e.Name&&this.VolumeType===e.VolumeType&&this.DeviceNode===e.DeviceNode&&this.MountPoint===e.MountPoint}static ConvertFromBytesToGB(e,t){if(void 0===e||"number"!=typeof e)throw new TypeError("'bytes' must be a number.");let r=1073741824;if(void 0!==t){if(!Object.values(p).includes(t))throw new RangeError(`'base' has an unsupported value. {${t}}`);p.BASE_10===t&&(r=1e9)}return e/r}static ConvertFrom1KBlockaToBytes(e){if(void 0===e||"number"!=typeof e)throw new TypeError("'blocks' must be a number.");if(e<0)throw new RangeError(`'blocks' must be a positive number. (${e})`);return 1024*e}}const f=(e=>{var t={};return a.d(t,e),t})({access:()=>t.access}),g=(e=>{var t={};return a.d(t,e),t})({constants:()=>r.constants,watch:()=>r.watch}),y=new s("vi_process"),w="change_detected",v="watch_add_result";class b extends o{constructor(){super(),this._timeoutID=-1,this._watchers=new Map,this._CB__VolumeWatcherChange=this._handleVolumeWatcherChangeDetected.bind(this)}Terminate(){this._watchers.forEach(((e,t)=>{y(`Volume Watcher closing target '${t}`),e.close()})),this._watchers.clear(),this.removeAllListeners(w),this.removeAllListeners(v)}async AddWatches(e){if(void 0===e||!Array.isArray(e)||e.length<=0)throw new TypeError("'watchList' is not a non-zero length array.");for(const t of e)if(!Object.prototype.hasOwnProperty.call(t,"target")||"string"!=typeof t.target||t.target.length<=0)throw new TypeError("'watchList' item does not contain a field 'target' or 'target' is not a non-null string.");return new Promise((t=>{(async e=>{let r=!0;const n=[];for(const t of e)n.push(this.ValidateAccess(t.target,g.constants.F_OK));const i=await Promise.all(n);for(const t of e){let e=!1,n=!1;Object.prototype.hasOwnProperty.call(t,"recursive")&&"boolean"==typeof t.recursive&&(e=t.recursive),Object.prototype.hasOwnProperty.call(t,"ignoreAccess")&&"boolean"==typeof t.ignoreAccess&&(n=t.ignoreAccess);let o=!1,s=!1;for(const e of i)if(e.target===t.target){o=e.success,s=!0;break}if(!s)throw new Error(`target:${t} not found in 'accessResults'`);const a=o||n;if(a){const r=this._watchers.has(t.target);y(`Watch target: '${t.target}' accessOk:${o} exists:${r}`),r&&this.DeleteWatch(t.target);const n=(0,g.watch)(t.target,{persistent:!0,recursive:e,encoding:"utf8"},this._CB__VolumeWatcherChange);this._watchers.set(t.target,n)}else y(`Unable to watch target: '${t.target}`),r=!1;this.emit(v,{target:t.target,success:a})}t(r)})(e)}))}DeleteWatch(e){let t=!1;const r=this._watchers.get(e);return void 0!==r&&(r.close(),t=this._watchers.delete(e)),t}ListWatches(){const e=[],t=this._watchers.keys();for(const r of t)e.push(r);return e}async ValidateAccess(e,t){if(null==e||"string"!=typeof e||e.length<1)throw new TypeError("'target' is not a non-zero string.");if(null==t||"number"!=typeof t)throw new TypeError("'accessMode' is not a number");return new Promise((r=>{(async(e,t)=>{try{await(0,f.access)(e,t),r({target:e,success:!0})}catch{r({target:e,success:!1})}})(e,t)}))}_handleVolumeWatcherChangeDetected(e,t){setImmediate(((e,t)=>{y(`Volume Watcher Change Detected: type:${e} name:${t}`),this.emit(w,e,t)}),e,t)}}const _=(e=>{var t={};return a.d(t,e),t})({spawn:()=>n.spawn}),C=(e=>{var t={};return a.d(t,e),t})({Buffer:()=>i.Buffer});var E={227:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},187:e=>{var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,s,l;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function f(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=m(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},284:function(e,t,r){var n,i,o;i=this,o=()=>{const e={VERSION:"1.0.11",not:{},all:{},any:{}},t=Object.prototype.toString,n=Array.prototype.slice,i=Object.prototype.hasOwnProperty,o=e=>(...t)=>!e(...n.call(t)),s=e=>(...t)=>{const r=u(t);for(const t of r)if(!e.call(null,t))return!1;return!0},a=e=>(...t)=>{const r=u(t);for(const t of r)if(e.call(null,t))return!0;return!1},c={"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t},l=(e,t)=>{const r=`${t}`,n=+(r.match(/\d+/)||NaN),i=r.match(/^[<>]=?|/)[0];return c[i]?c[i](e,n):e==n||n!=n},u=t=>{let r=n.call(t);return 1===r.length&&e.array(r[0])&&(r=r[0]),r};e.arguments=e=>"[object Arguments]"===t.call(e)||null!=e&&"object"==typeof e&&"callee"in e,e.array=e=>Array.isArray(e)&&"[object Array]"===t.call(e),e.boolean=e=>(!0===e||!1===e)&&new Boolean(e)instanceof Boolean&&"[object Boolean]"===t.call(e),e.char=t=>e.string(t)&&1===t.length,e.date=r=>new Date(r)instanceof Date&&e.not.nan(r)&&"[object Date]"===t.call(r),e.domNode=t=>e.object(t)&&t.nodeType>0,e.error=e=>"[object Error]"===t.call(e),e.function=e=>"[object Function]"===t.call(e)||"function"==typeof e,e.json=e=>"[object Object]"===t.call(e),e.nan=e=>Number.isNaN(e),e.null=e=>null===e,e.number=e=>new Number(e)instanceof Number&&"number"==typeof e&&Number.isFinite(e),e.object=e=>Object(e)===e,e.regexp=e=>"[object RegExp]"===t.call(e),e.sameType=(r,n)=>{const i=t.call(r);return i===t.call(n)&&("[object Number]"!==i||!e.any.nan(r,n)||e.all.nan(r,n))},e.sameType.api=["not"],e.string=e=>new String(e)instanceof String&&"string"==typeof e&&"[object String]"===t.call(e),e.undefined=e=>void 0===e,e.windowObject=e=>null!=e&&"object"==typeof e&&"setInterval"in e,e.stream=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe,e.duplexStream=t=>e.writeableStream(t)&&e.readableStream(t),e.readableStream=t=>e.stream(t)&&!1!==t.readable&&"function"==typeof t._read&&"object"==typeof t._readableState,e.transformStream=t=>e.duplexStream(t)&&"function"==typeof t._transform,e.writeableStream=t=>e.stream(t)&&!1!==t.writable&&"function"==typeof t._write&&"object"==typeof t._writableState,e.empty=t=>{if(e.object(t)){const r=Object.getOwnPropertyNames(t).length;return!!(0===r||1===r&&e.array(t)||2===r&&e.arguments(t))}return""===t},e.map=e=>{const t=e.constructor?e.constructor+"":"";return/^function\s+Map\b/.test(t)},e.existy=e=>null!=e,e.falsy=e=>!e,e.truthy=o(e.falsy),e.above=(t,r)=>e.all.number(t,r)&&t>r,e.above.api=["not"],e.decimal=t=>e.number(t)&&t%1!=0,e.equal=(t,r)=>e.all.array(t,r)?t.length===r.length&&t.every((e=>r.includes(e))):e.all.object(t,r)?JSON.stringify(t)===JSON.stringify(r):e.all.number(t,r)?t===r&&1/t==1/r:e.all.string(t,r)||e.all.regexp(t,r)?`${t}`==`${r}`:!!e.all.boolean(t,r)&&t===r,e.equal.api=["not"],e.even=t=>e.number(t)&&t%2==0,e.finite=isFinite||(t=>e.not.infinite(t)&&e.not.nan(t)),e.infinite=e=>e===1/0||e===-1/0,e.integer=e=>Number.isInteger(e),e.negative=t=>e.number(t)&&t<0,e.odd=t=>e.number(t)&&(t%2==1||t%2==-1),e.positive=t=>e.number(t)&&t>0,e.under=(t,r)=>e.all.number(t,r)&&t<r,e.under.api=["not"],e.within=(t,r,n)=>e.all.number(t,r,n)&&t>r&&t<n,e.within.api=["not"];const h={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,crawler:new RegExp("^.*("+["\\+https:\\/\\/developers.google.com\\/\\+\\/web\\/snippet\\/","ad\\smonitoring","adsbot","apex","applebot","archive.org_bot","baiduspider","bingbot","chromeheadless","cloudflare","cloudinary","crawler","curl","discordbot","duckduckbot","embedly","exabot","facebookexternalhit","facebot","flipboard","google","googlebot","gsa-crawler","gurujibot","guzzlehttp","heritrix","ia_archiver","insights","linkedinbot","ltx71","mediapartners","msnbot","odklbot","phantom\\.js","phantomjs","pingdom","pinterest","python","rtlnieuws","skypeuripreview","slackbot","slurp","spbot","telegrambot","test\\scertificate","testing","tiabot","tumblr ","twitterbot","vkshare","web\\sscraper","wget","yandexbot","whatsapp","orangebot","smtbot","qwantify","mj12bot","ahrefsbot","seznambot","panscient.com","duckduckgo-favicons-bot","uptimerobot","semrushbot","postman","dotbot","zoominfobot","ifttt","sogou","ru_bot","researchscan","nimbostratus-bot","slack-imgproxy","node-superagent","go-http-client","jersey","dataprovider.com","github-camo","dispatch","checkmarknetwork","screaming frog","whatweb","daum","netcraftsurveyagent","mojeekbot","surdotlybot","springbot"].join("|")+").*$","i"),creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^[a-zA-Z0-9][-_.+!#$%&'*/=?^`{|]{0,1}([a-zA-Z0-9][-_.+!#$%&'*/=?^`{|]{0,1})*[a-zA-Z0-9]@[a-zA-Z0-9][-.]{0,1}([a-zA-Z][-.]{0,1})*[a-zA-Z0-9]\.[a-zA-Z0-9]{1,}([.-]{0,1}[a-zA-Z]){0,}[a-zA-Z0-9]{0,}$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,macAddress:/^([0-9a-f]{2}[-:]){5}[0-9a-f]{2}$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/},d=(t,r)=>{e[t]=n=>e.existy(n)&&r[t].test(n)};for(const e in h)Object.prototype.hasOwnProperty.call(h,e)&&d(e,h);e.ip=t=>e.ipv4(t)||e.ipv6(t),e.capitalized=t=>{if(e.not.string(t))return!1;const r=t.split(" ");for(const e of r)if(e.length){const t=e.charAt(0);if(t!==t.toUpperCase())return!1}return!0},e.endWith=(t,r)=>{if(e.not.string(t))return!1;r+="";const n=t.length-r.length;return n>=0&&t.indexOf(r,n)===n},e.endWith.api=["not"],e.include=(e,t)=>e.includes(t),e.include.api=["not"],e.umlaut=t=>e.string(t)&&e.array(t.match(/[\u00c4\u00e4\u00d6\u00f6\u00dc\u00fc\u00df]/g)),e.lowerCase=t=>e.string(t)&&t===t.toLowerCase(),e.palindrome=t=>!e.not.string(t)&&(t=t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()).split("").every(((e,r)=>e===t[t.length-1-r])),e.space=t=>{if(e.not.char(t))return!1;const r=t.charCodeAt(0);return r>8&&r<14||32===r},e.startWith=(t,r)=>e.string(t)&&0===t.indexOf(r),e.startWith.api=["not"],e.upperCase=t=>e.string(t)&&t===t.toUpperCase();const p=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],m=["january","february","march","april","may","june","july","august","september","october","november","december"];e.day=(t,r)=>e.date(t)&&r.toLowerCase()===p[t.getDay()],e.day.api=["not"],e.dayLightSavingTime=e=>{const t=new Date(e.getFullYear(),0,1),r=new Date(e.getFullYear(),6,1),n=Math.max(t.getTimezoneOffset(),r.getTimezoneOffset());return e.getTimezoneOffset()<n},e.future=t=>{const r=new Date;return e.date(t)&&t.getTime()>r.getTime()},e.inDateRange=(t,r,n)=>{if(e.not.date(t)||e.not.date(r)||e.not.date(n))return!1;const i=t.getTime();return i>r.getTime()&&i<n.getTime()},e.inDateRange.api=["not"],e.inLastMonth=t=>e.inDateRange(t,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date),e.inLastWeek=t=>e.inDateRange(t,new Date((new Date).setDate((new Date).getDate()-7)),new Date),e.inLastYear=t=>e.inDateRange(t,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date),e.inNextMonth=t=>e.inDateRange(t,new Date,new Date((new Date).setMonth((new Date).getMonth()+1))),e.inNextWeek=t=>e.inDateRange(t,new Date,new Date((new Date).setDate((new Date).getDate()+7))),e.inNextYear=t=>e.inDateRange(t,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1))),e.leapYear=t=>e.number(t)&&(t%4==0&&t%100!=0||t%400==0),e.month=(t,r)=>e.date(t)&&r.toLowerCase()===m[t.getMonth()],e.month.api=["not"],e.past=t=>{const r=new Date;return e.date(t)&&t.getTime()<r.getTime()},e.quarterOfYear=(t,r)=>e.date(t)&&e.number(r)&&r===Math.floor((t.getMonth()+3)/3),e.quarterOfYear.api=["not"],e.today=t=>{const r=(new Date).toDateString();return e.date(t)&&t.toDateString()===r},e.tomorrow=t=>{const r=new Date,n=new Date(r.setDate(r.getDate()+1)).toDateString();return e.date(t)&&t.toDateString()===n},e.weekend=t=>e.date(t)&&(6===t.getDay()||0===t.getDay()),e.weekday=o(e.weekend),e.year=(t,r)=>e.date(t)&&e.number(r)&&r===t.getFullYear(),e.year.api=["not"],e.yesterday=t=>{const r=new Date,n=new Date(r.setDate(r.getDate()-1)).toDateString();return e.date(t)&&t.toDateString()===n};const f=e.windowObject("object"==typeof r.g&&r.g)&&r.g,g=e.windowObject("object"==typeof self&&self)&&self,y=e.windowObject("object"==typeof this&&this)&&this,w=f||g||y||Function("return this")(),v=g&&g.document,b=w.is,_=g?.navigator,C=(_?.userAgentData?.platform||_?.platform||"").toLowerCase(),E=(_?.userAgent||"").toLowerCase(),N=(_?.vendor||"").toLowerCase();return e.browser=()=>"undefined"!=typeof window&&void 0!==window.document,e.browser.api=["not"],e.nodejs=()=>"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,e.nodejs.api=["not"],e.deno=()=>!1,e.deno.api=["not"],e.webworker=()=>"object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,e.webworker.api=["not"],e.android=()=>/android/.test(E),e.android.api=["not"],e.androidPhone=()=>/android/.test(E)&&/mobile/.test(E),e.androidPhone.api=["not"],e.androidTablet=()=>/android/.test(E)&&!/mobile/.test(E),e.androidTablet.api=["not"],e.blackberry=()=>/blackberry/.test(E)||/bb10/.test(E),e.blackberry.api=["not"],e.chrome=t=>{const r=/google inc/.test(N)?E.match(/(?:chrome|crios)\/(\d+)/):null;return null!==r&&e.not.opera()&&l(r[1],t)},e.chrome.api=["not"],e.desktop=()=>e.not.mobile()&&e.not.tablet(),e.desktop.api=["not"],e.edge=e=>{const t=E.match(/edg(e|a|ios)?\/(\d+)/);return null!==t&&l(t[1],e)},e.edge.api=["not"],e.firefox=e=>{const t=E.match(/(?:firefox|fxios)\/(\d+)/);return null!==t&&l(t[1],e)},e.firefox.api=["not"],e.ie=e=>{const t=E.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&l(t[1],e)},e.ie.api=["not"],e.ios=()=>e.iphone()||e.ipad()||e.ipod(),e.ios.api=["not"],e.ipad=e=>{const t=E.match(/\(ipad.*os (\d+)[._](\d+)/)||(E.includes("mac")&&"ontouchend"in v?E.match(/version\/(\d+)/):null);return null!==t&&l(t[1],e)},e.ipad.api=["not"],e.iphone=e=>{const t=E.match(/\(iphone.*os (\d+)[._](\d+)/);return null!==t&&l(t[1]||1,e)},e.iphone.api=["not"],e.ipod=e=>{const t=E.match(/ipod.+?os (\d+)/);return null!==t&&l(t[1],e)},e.ipod.api=["not"],e.linux=()=>/linux/.test(C)&&e.not.android(),e.linux.api=["not"],e.mac=()=>/mac/.test(C),e.mac.api=["not"],e.mobile=()=>e.iphone()||e.ipod()||e.androidPhone()||e.blackberry()||e.windowsPhone(),e.mobile.api=["not"],e.offline=o(e.online),e.offline.api=["not"],e.online=()=>!_||!0===_.onLine,e.online.api=["not"],e.opera=e=>{const t=E.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==t&&l(t[1],e)},e.opera.api=["not"],e.operaMini=e=>{const t=E.match(/opera mini\/(\d+)/);return null!==t&&l(t[1],e)},e.operaMini.api=["not"],e.phantom=e=>{const t=E.match(/phantomjs\/(\d+)/);return null!==t&&l(t[1],e)},e.phantom.api=["not"],e.safari=e=>{const t=E.match(/version\/(\d+)((?!chrome).)+?safari/);return null!==t&&l(t[1],e)},e.safari.api=["not"],e.tablet=()=>e.ipad()||e.androidTablet()||e.windowsTablet(),e.tablet.api=["not"],e.touchDevice=()=>!!v&&("ontouchstart"in g||"DocumentTouch"in g&&v instanceof DocumentTouch),e.touchDevice.api=["not"],e.windows=()=>/win/.test(C),e.windows.api=["not"],e.windowsPhone=()=>e.windows()&&/phone/.test(E),e.windowsPhone.api=["not"],e.windowsTablet=()=>e.windows()&&e.not.windowsPhone()&&/touch/.test(E),e.windowsTablet.api=["not"],e.propertyCount=(t,r)=>{if(e.not.object(t)||e.not.number(r))return!1;let n=0;for(const e in t)if(i.call(t,e)&&++n>r)return!1;return n===r},e.propertyCount.api=["not"],e.propertyDefined=(t,r)=>e.object(t)&&e.string(r)&&r in t,e.propertyDefined.api=["not"],e.thenable=t=>e.object(t)&&"function"==typeof t.then,e.inArray=(t,r)=>!e.not.array(r)&&r.includes(t),e.inArray.api=["not"],e.sorted=(t,r)=>{if(e.not.array(t))return!1;const n=c[r]||c[">="];for(const[e]of t.entries())if(e>=1&&!n(t[e],t[e-1]))return!1;return!0},(()=>{const t=e;for(const r in t)if(i.call(t,r)&&e.function(t[r])){const n=t[r].api||["not","all","any"];for(const t of n)"not"===t&&(e.not[r]=o(e[r])),"all"===t&&(e.all[r]=s(e[r])),"any"===t&&(e.any[r]=a(e[r]))}})(),e.setNamespace=()=>(w.is=b,this),e.setRegexp=(e,t)=>{for(const r in h)i.call(h,r)&&t===r&&(h[r]=e)},e},void 0===(n=(()=>i.is=o()).call(t,r,t,e))||(e.exports=n)},824:e=>{var t=1e3,r=60*t,n=60*r,i=24*n;function o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=n?o(a,c,n,"hour"):c>=r?o(a,c,r,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}},N={};function O(e){var t=N[e];if(void 0!==t)return t.exports;var r=N[e]={exports:{}};return E[e].call(r.exports,r,r.exports,O),r.exports}O.d=(e,t)=>{for(var r in t)O.o(t,r)&&!O.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},O.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),O.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var D={};(()=>{O.d(D,{RB:()=>d,hA:()=>l,nb:()=>u,ZP:()=>p});var e=O(187),t=O(227);const r=(n={spawn:()=>_.spawn},i={},O.d(i,n),i);var n,i;const o=(s={Buffer:()=>C.Buffer},a={},O.d(a,s),a);var s,a,c=O(284);t("spawn_options").log=console.log.bind(console);const l={SERIALIZATION_JSON:"json",SERIALIZATION_ADVANCED:"advanced"},u=class{constructor(e){if(this._cwd=void 0,this._env=process.env,this._argv0=void 0,this._stdio=void 0,this._detached=!1,this._uid=void 0,this._gid=void 0,this._serialization=l.SERIALIZATION_JSON,this._shell=!1,this._windowsVerbatimArgs=!1,this._windowsHide=!1,this._signal=void 0,this._timeout=void 0,this._killSignal="SIGTERM",c.not.undefined(e))if(c.object(e)){let t=!1;if(Object.prototype.hasOwnProperty.call(e,"testing")&&c.boolean(e.testing)&&(t=e.testing),Object.prototype.hasOwnProperty.call(e,"cwd"))if(c.sameType(e.cwd,"string")||e.cwd instanceof URL)this._cwd=e.cwd;else if(!t)throw new TypeError(`'config.cwd' is not string or URL. type(${typeof e.cwd})`);if(Object.prototype.hasOwnProperty.call(e,"env"))if(c.object(e.env))this._env=e.env;else if(!t)throw new TypeError(`'config.env' is not an object. type(${typeof e.env})`);if(Object.prototype.hasOwnProperty.call(e,"argv0"))if(c.sameType(e.argv0,"string"))this._argv0=e.argv0;else if(!t)throw new TypeError(`'config.argv0' is not string. type(${typeof e.cwd})`);if(Object.prototype.hasOwnProperty.call(e,"stdio"))if(c.sameType(e.stdio,"string")||c.array(e.stdio))this._stdio=e.stdio;else if(!t)throw new TypeError(`'config.stdio' is not string or Array. type(${typeof e.stdio})`);if(Object.prototype.hasOwnProperty.call(e,"detached"))if(c.boolean(e.detached))this._detached=e.detached;else if(!t)throw new TypeError(`'config.detached' is not a boolean. type(${typeof e.detached})`);if(Object.prototype.hasOwnProperty.call(e,"uid"))if(c.number(e.uid))this._uid=e.uid;else if(!t)throw new TypeError(`'config.uid' is not a number. type(${typeof e.uid})`);if(Object.prototype.hasOwnProperty.call(e,"gid"))if(c.number(e.gid))this._gid=e.gid;else if(!t)throw new TypeError(`'config.gid' is not a number. type(${typeof e.gid})`);if(Object.prototype.hasOwnProperty.call(e,"serialization"))if(c.truthy(Object.values(l).indexOf(e.serialization)>=0))this._serialization=e.serialization;else if(!t)throw new TypeError(`'config.serialization' is not a serialization type. type(${typeof e.serialization})`);if(Object.prototype.hasOwnProperty.call(e,"shell"))if(c.boolean(e.shell)||c.sameType(e.shell,"string"))this._shell=e.shell;else if(!t)throw new TypeError(`'config.shell' is neither a boolean nor a string. type(${typeof e.shell})`);if(Object.prototype.hasOwnProperty.call(e,"windowsVerbatimArguments"))if(c.boolean(e.windowsVerbatimArguments))this._windowsVerbatimArgs=e.windowsVerbatimArguments;else if(!t)throw new TypeError(`'config.windowsVerbatimArguments' is not a boolean. type(${typeof e.windowsVerbatimArguments})`);if(Object.prototype.hasOwnProperty.call(e,"windowsHide"))if(c.boolean(e.windowsHide))this._windowsHide=e.windowsHide;else if(!t)throw new TypeError(`'config.windowsHide' is not a boolean. type(${typeof e.windowsHide})`);if(Object.prototype.hasOwnProperty.call(e,"signal"))if(e.signal instanceof AbortSignal)this._signal=e.signal;else if(!t)throw new TypeError(`'config.signal' is not an AbortSignal type. type(${typeof e.signal})`);if(Object.prototype.hasOwnProperty.call(e,"timeout"))if(c.number(e.timeout))this._timeout=e.timeout;else if(!t)throw new TypeError(`'config.timeout' is not a number type(${typeof e.timeout})`);if(Object.prototype.hasOwnProperty.call(e,"killSignal"))if(c.sameType(e.killSignal,"string")||c.integer(e.killSignal))this._killSignal=e.killSignal;else if(!t)throw new TypeError(`'config.killSignal' is neither a string nor integer type. type(${typeof e.killSignal})`)}else if(!testing)throw new TypeError(`'config' is not an object. type(${typeof e})`)}get CurrentWorkingDirectory(){return this._cwd}get Environment(){return this._env}get ArgV0(){return this._argv0}get StdIo(){return this._stdio}get Detached(){return this._detached}get UID(){return this._uid}get GID(){return this._gid}get Serialization(){return this._serialization}get Shell(){return this._shell}get WindowsVerbatimArguments(){return this._windowsVerbatimArgs}get WindowsHide(){return this._windowsHide}get AbortSignal(){return this._signal}get Timeout(){return this._timeout}get KillSignal(){return this._killSignal}get Data(){return{cwd:this.CurrentWorkingDirectory,env:this.Environment,argv0:this.ArgV0,stdio:this.StdIo,detached:this.Detached,uid:this.UID,gid:this.GID,serialization:this.Serialization,shell:this.Shell,windowsVerbatimArguments:this.WindowsVerbatimArguments,windowsHide:this.WindowsHide,signal:this.AbortSignal,timeout:this.Timeout,killSignal:this.KillSignal}}},h=t("spawn_helper");h.log=console.log.bind(console);const d={EVENT_COMPLETE:"complete"},p=class extends e{constructor(e){if(void 0!==e)throw new TypeError("SpawnHelper does not use any arguments.");super(),this._command=void 0,this._arguments=void 0,this._options=void 0,this._token=void 0,this._result_data=void 0,this._error_data=void 0,this._error_encountered=!1,this._pending=!1,this._CB__process_stdout_data=this._process_stdout_data.bind(this),this._CB__process_stderror_data=this._process_stderror_data.bind(this),this._CB_process_message=this._process_message.bind(this),this._CB_process_error=this._process_error.bind(this),this._CB_process_close=this._process_close.bind(this)}get IsPending(){return this._pending}get IsValid(){return!c.undefined(this.Command)&&!this.IsPending&&!this._error_encountered}get Result(){return this._result_data}get Error(){return this._error_data}get Command(){return this._command}get Arguments(){return this._arguments}get Options(){return this._options}get Token(){return this._token}get Options(){return this._options}Spawn(e){if(this.IsPending)throw new Error("Spawn is already in progress.");if(c.undefined(e)||!c.object(e))throw new TypeError("request must be an object");if(!Object.prototype.hasOwnProperty.call(e,"command")||!c.string(e.command)||e.command.length<=0)throw new TypeError("request.command must be a non-zero length string.");if(this._command=e.command,Object.prototype.hasOwnProperty.call(e,"arguments")){if(!c.array(e.arguments))throw new TypeError("request.arguments must be an array of strings.");for(const t of e.arguments)if(!c.string(t))throw new TypeError("request.arguments must contain only strings.");this._arguments=e.arguments}else this._arguments=[];let t;if(Object.prototype.hasOwnProperty.call(e,"options")){if(!(e.options instanceof u))throw new TypeError("request.options must be an instance of _SpawnOptions.");this._options=e.options,t=e.options.Data}else this._options=void 0;if(Object.prototype.hasOwnProperty.call(e,"token")){if(c.undefined(e.token))throw new TypeError("request.token must be something if it is specified.");this._token=e.token}else this._token=void 0;this._result_data=void 0,this._error_data=void 0,this._error_encountered=!1,this._pending=!0,h(`Spawning command: ${this.Command}`);const n=(0,r.spawn)(this.Command,this.Arguments,t);n.stdout.on("data",this._CB__process_stdout_data),n.stderr.on("data",this._CB__process_stderror_data),n.on("message",this._CB_process_message),n.on("error",this._CB_process_error),n.on("close",this._CB_process_close)}_process_stdout_data(e){c.undefined(this._result_data)?this._result_data=e:this._result_data+=e}_process_stderror_data(e){c.undefined(this._error_data)?this._error_data=e:this._error_data+=e,this._error_encountered=!0}_process_message(e,t){h(`Child Process for ${this.Command}: '${e}'`)}_process_error(e){h(`Child Process for ${this.Command}: error_num:${e.number} error_name:${e.name} error_msg:${e.message}`);let t="";c.not.undefined(this._error_data)&&(t+="\n"),t+=`Error Encountered. err#${e.number} name:${e.name} msg:${e.message}\n`;const r=o.Buffer.from(t,"utf-8");this._process_stderror_data(r)}_process_close(e,t){h(`Child Process for ${this.Command}: exit_code:${e} by signal:'${t}'`),this._pending=!1;const r=this.IsValid,n={valid:r,result:r?this.Result:this.Error,token:this.Token,source:this};this.emit(d.EVENT_COMPLETE,n)}}})();var I=D.RB,T=D.ZP;const S=s("vi_process"),x=s("vi_config");S.log=console.log.bind(console),x.log=console.log.bind(console);const A=5/60,P=-1,F=6e5,k={Name:"name",SerialNumber:"serial_num"},j="scanning",L="ready";class R extends o{constructor(e){let t=6,r=15;const n=[],i=[];if(void 0!==e){if(Object.prototype.hasOwnProperty.call(e,"period_hr")){if(!("number"==typeof e.period_hr&&e.period_hr>=A&&e.period_hr<=744))throw"number"!=typeof e.period_hr?new TypeError(`'config.period_hr' must be a number between ${A} and 744`):new RangeError(`'config.period_hr' must be a number between ${A} and 744`);t=e.period_hr}if(Object.prototype.hasOwnProperty.call(e,"default_alarm_threshold")){if(!("number"==typeof e.period_hr&&e.default_alarm_threshold>=0&&e.default_alarm_threshold<=100))throw"number"!=typeof e.period_hr?new TypeError("'config.default_alarm_threshold' must be a number between 0 and 100"):new RangeError("'config.default_alarm_threshold' must be a number between 0 and 100");r=e.default_alarm_threshold}if(Object.prototype.hasOwnProperty.call(e,"exclusion_masks")){if(!Array.isArray(e.exclusion_masks))throw new TypeError("'config.volume_customizations' must be an array.");for(const t of e.exclusion_masks){if(!R._validateVolumeExclusionMask(t))throw new TypeError("'config.volume_customizations' item is not valid.");i.push(t)}}if(Object.prototype.hasOwnProperty.call(e,"volume_customizations")){if(!Array.isArray(e.volume_customizations))throw new TypeError("'config.volume_customizations' must be an array.");for(const t of e.volume_customizations){if(!R._validateVolumeCustomization(t))throw new TypeError("'config.volume_customizations' item is not valid.");n.push(t)}}}super(),this._timeoutID=P,this._deferInitCheckTimeoutID=P,this._decoupledStartTimeoutID=P,this._checkInProgress=!1,this._period_hr=6,this._theVolumes=[],this._defaultAlarmThreshold=r,this._volumeCustomizations=n,this._exclusionMasks=i,this._CB__initiateCheck=this._on_initiateCheck.bind(this),this._CB__ResetCheck=this._on_reset_check.bind(this),this._DECOUPLE_Start=this.Start.bind(this),this._CB__VolumeWatcherChange=this._handleVolumeWatcherChangeDetected.bind(this),this._CB__VolumeWatcherAdded=this._handleVolumeWatcherAdded.bind(this),this.Period=t;const o=this._watchFolders,s=[];for(const e of o)s.push({target:e,recursive:!1,ignoreAccess:!1});this._volWatcher=new b,this._volWatcher.on(w,this._CB__VolumeWatcherChange),this._volWatcher.on(v,this._CB__VolumeWatcherAdded),this._volWatcher.AddWatches(s)}Terminate(){this.Stop(),this._volWatcher.Terminate(),this.removeAllListeners(j),this.removeAllListeners(L)}get Period(){return this._period_hr}set Period(e){if(void 0===e||"number"!=typeof e)throw new TypeError(`'period_hr' must be a number between ${A} and 744`);if(e<A&&e>744)throw new RangeError(`'period_hr' must be a number between ${A} and 744`);this._period_hr=e,this.Stop()}get MinimumPeriod(){return A}get MaximumPeriod(){return 744}get Active(){return this._timeoutID!==P}Start(){this.Stop();const e=1e3*(0,l.uptime)();e<F?this._decoupledStartTimeoutID=setTimeout(this._DECOUPLE_Start,F-e):this._on_initiateCheck()}Stop(){this._timeoutID!==P&&(clearTimeout(this._timeoutID),this._timeoutID=P),this._decoupledStartTimeoutID!==P&&(clearTimeout(this._decoupledStartTimeoutID),this._decoupledStartTimeoutID=P),this._deferInitCheckTimeoutID!==P&&(clearTimeout(this._deferInitCheckTimeoutID),this._deferInitCheckTimeoutID=P)}_on_reset_check(e){if(void 0===e||"boolean"!=typeof e)throw new TypeError("issueReadyEvent is not a boolean.");this._checkInProgress=!1,this._deferInitCheckTimeoutID=P,this._theVolumes=[],this._doReset(),this._decoupledStartTimeoutID!==P&&(clearTimeout(this._decoupledStartTimeoutID),this._decoupledStartTimeoutID=P),e&&this.emit(L,{results:[]})}_on_initiateCheck(){const e=this._checkInProgress;S(`_on_initiateCheck(): Initiating a scan. CheckInProgress=${e}`),this._checkInProgress?this._deferInitCheckTimeoutID===P&&(this._deferInitCheckTimeoutID=setTimeout(this._CB__ResetCheck,12e4,!0)):(this.emit(j),this._checkInProgress=!0,this._theVolumes=[],this._doReset(),this._initiateInterrogation());const t=e?250:36e5*this._period_hr;this._timeoutID=setTimeout(this._CB__initiateCheck,t)}_initiateInterrogation(){throw new Error("Abstract Method _initiateInterrogation() invoked!")}_doReset(){throw new Error("Abstract Method _doReset() invoked!")}get _isCheckInProgress(){throw new Error("Abstract Property _checkInProgress() invoked!")}get _watchFolders(){throw new Error("Abstract Property _watchFolders() invoked!")}_updateCheckInProgress(){const e=this._checkInProgress;if(this._checkInProgress=this._isCheckInProgress,e&&!this._checkInProgress){this.emit(L,{results:this._theVolumes}),S("Ready event.");for(const e of this._theVolumes)S(`Volume Name: ${e.Name}`),S(`\tVisible:    ${e.IsVisible}`),S(`\tShown:      ${e.IsShown}`),S(`\tMountPoint: ${e.MountPoint}`),S(`\tDevNode:    ${e.DeviceNode}`),S(`\tCapacity:   ${m.ConvertFromBytesToGB(e.Size).toFixed(4)} GB`),S(`\tFree:       ${m.ConvertFromBytesToGB(e.FreeSpace).toFixed(4)} GB`),S(`\tUsed:       ${m.ConvertFromBytesToGB(e.UsedSpace).toFixed(4)} GB`),S(`\t% Used:     ${(e.UsedSpace/e.Size*100).toFixed(2)}%`)}}_determineLowSpaceAlert(e,t,r){if(void 0===e||"string"!=typeof e||e.length<=0)throw new TypeError("'volumeName' must be a non-zero length string");if(void 0===t||"string"!=typeof t||t.length<=0)throw new TypeError("'volumeUUID' must be a non-zero length string");if(void 0===r||"number"!=typeof r)throw new TypeError("'volumePercentFree' must be a number");if(r<0||r>100)throw new RangeError(`'volumePercentFree' must be in the range of 0...100. ${r}`);let n=r<this._defaultAlarmThreshold;const i=this._volumeCustomizations.filter((r=>r.volume_id_method===k.Name&&r.volume_name.toLowerCase()===e.toLowerCase()||r.volume_id_method===k.SerialNumber&&r.volume_serial_num.toLowerCase()===t.toLowerCase()));return void 0!==i&&i.length>0&&(n=i.filter((e=>e.volume_low_space_alarm_active&&r<e.volume_alarm_threshold)).length>0),n}_handleVolumeWatcherChangeDetected(e,t){setImmediate(((e,t)=>{S(`Volume Watcher Change Detected: type:${e} name:${t} active:${this.Active} chkInProgress:${this._checkInProgress}`),this.Active&&(this._decoupledStartTimeoutID!==P&&clearTimeout(this._decoupledStartTimeoutID),this._decoupledStartTimeoutID=setTimeout(this._DECOUPLE_Start,1e3))}),e,t)}_handleVolumeWatcherAdded(e){void 0!==e&&S(`AddWatch Results: target:${e.target} status:${e.success}`)}_isVolumeShown(e){if(void 0===e||"string"!=typeof e||e.length<=0)throw new TypeError(`_isVolumeShown. mountPoint is not valid. ${e}`);let t=!0;for(const r of this._exclusionMasks){S(`Evaluating exclusion mask '${r}' for mount point '${e}'`);const n=new RegExp(r),i=e.match(n);S(i),t=t&&null===i}return t}static _validateVolumeCustomization(e){let t=void 0!==e;return t&&((!Object.prototype.hasOwnProperty.call(e,"volume_id_method")||"string"!=typeof e.volume_id_method||Object.values(k).indexOf(e.volume_id_method)<0)&&(t=!1),t&&e.volume_id_method===k.Name&&(!Object.prototype.hasOwnProperty.call(e,"volume_name")||"string"!=typeof e.volume_name||e.volume_name.length<=0)&&(t=!1),t&&e.volume_id_method===k.SerialNumber&&(!Object.prototype.hasOwnProperty.call(e,"volume_serial_num")||"string"!=typeof e.volume_serial_num||e.volume_serial_num.length<=0)&&(t=!1),Object.prototype.hasOwnProperty.call(e,"volume_low_space_alarm_active")&&"boolean"==typeof e.volume_low_space_alarm_active||(t=!1),t&&e.volume_low_space_alarm_active&&(!Object.prototype.hasOwnProperty.call(e,"volume_alarm_threshold")||"number"!=typeof e.volume_alarm_threshold||e.volume_alarm_threshold<=0||e.volume_alarm_threshold>=100)&&(t=!1)),t}static _validateVolumeExclusionMask(e){let t=void 0!==e;return t&&(t="string"==typeof e),t}}var M=a(78);const $=s("vi_process"),V=s("vi_config");$.log=console.log.bind(console),V.log=console.log.bind(console);const B=/\s+/;class U extends R{constructor(e){const t=process.platform;if(void 0===t||"string"!=typeof t||t.length<=0||"darwin"!==t.toLowerCase())throw new Error(`Operating system not supported. os:${t}`);super(e),this._pendingFileSystems=[],this._pendingVolumes=[],this._theVisibleVolumeNames=[],this._CB__list_known_virtual_filesystems_complete=this._on_lsvfs_complete.bind(this),this._CB__display_free_disk_space_complete=this._on_df_complete.bind(this),this._CB__visible_volumes=this._on_process_visible_volumes.bind(this),this._CB_process_diskUtil_info_complete=this._on_process_diskutil_info_complete.bind(this),this._CB_process_disk_utilization_stats_complete=this._on_process_disk_utilization_stats_complete.bind(this)}_initiateInterrogation(){const e=new T;e.on(I.EVENT_COMPLETE,this._CB__visible_volumes),e.Spawn({command:"ls",arguments:["/Volumes"]})}_doReset(){this._pendingFileSystems=[],this._theVisibleVolumeNames=[],this._pendingVolumes=[]}get _isCheckInProgress(){return $(`_isCheckInProgress: Pending Volume Count - ${this._pendingVolumes.length}`),0!==this._pendingVolumes.length||0!==this._pendingFileSystems.length}get _watchFolders(){return["/Volumes"]}_on_process_visible_volumes(e){if(V(`'${e.source.Command} ${e.source.Arguments}' Spawn Helper Result: valid:${e.valid}`),V(e.result.toString()),this._checkInProgress)if(e.valid&&void 0!==e.result){this._theVisibleVolumeNames=e.result.toString().split("\n");const t=new T;t.on(I.EVENT_COMPLETE,this._CB__list_known_virtual_filesystems_complete),t.Spawn({command:"lsvfs"})}else this._checkInProgress=!1,$(`Error processing '${e.source.Command} ${e.source.Arguments}'. Err:${e.result}`),this.emit("ready",{results:[]})}_on_lsvfs_complete(e){if(V(`'${e.source.Command} ${e.source.Arguments}' Spawn Helper Result: valid:${e.valid}`),V(e.result.toString()),this._checkInProgress)if(e.valid&&void 0!==e.result){const t=2,r=-1;e.result.toString().split("\n").slice(t,r).forEach((e=>{const t=e.split(B);if(3===t.length){const e=Number.parseInt(t[1],10);if(e>0){const r={type:t[0].toLowerCase(),count:e,flags:t[2].toLowerCase()},n=this._pendingFileSystems.findIndex((e=>e.type.toLowerCase()===r.type));if(n<0){this._pendingFileSystems.push(r),$(`Spawn df for fs type '${r.type}'.`);const e=new T;e.on(I.EVENT_COMPLETE,this._CB__display_free_disk_space_complete),e.Spawn({command:"df",arguments:["-a","-b","-T",r.type],token:r})}else this._pendingFileSystems[n]=r,$(`_on_lsvfs_complete: Duplicated file system type. '${r.type}'`)}}else $(`_on_lsvfs_complete: Error processing line '${e}'`),$(t)}))}else this._checkInProgress=!1,$(`Error processing '${e.source.Command} ${e.source.Arguments}'. Err:${e.result}`),this.emit("ready",{results:[]})}_on_df_complete(e){if(V(`'${e.source.Command} ${e.source.Arguments}' Spawn Helper Result: valid:${e.valid}`),V(e.result.toString()),void 0!==e.token&&(V("Spawn Token:"),V(e.token)),this._checkInProgress)if(e.valid&&void 0!==e.result){if(void 0===e.token)throw new Error("Spawn token is missing.");if("object"!=typeof e.token)throw new TypeError("Spawn token is not a string.");if(!this._pendingFileSystems.includes(e.token))throw new Error("Spawn token is not in the pending file system list.");if(this._pendingFileSystems=this._pendingFileSystems.filter((t=>t.type!==e.token.type||t.count!==e.token.count||t.flags!==e.token.flags)),Object.values(d).includes(e.token.type)){const t=1,r=-1;e.result.toString().split("\n").slice(t,r).forEach((t=>{const r=t.split(B),n=r.slice(5,r.length);r[5]=n.join(" ");const i={device_node:r[0].toLowerCase(),blocks:Number.parseInt(r[1],10),used_blks:Number.parseInt(r[2],10),avail_blks:Number.parseInt(r[3],10),capacity:Number.parseInt(r[4].slice(0,-1),10),mount_point:r[5]};let o=i.mount_point;const s=i.mount_point.split("/");s.length>0&&s[s.length-1].length>0&&(o=s[s.length-1]);const a=this._determineLowSpaceAlert(o,"~~ not used ~~",i.avail_blks/i.blocks*100),c=new m({name:o,volume_type:e.token.type,mount_point:i.mount_point,volume_uuid:"unknown",device_node:i.device_node,capacity_bytes:512*i.blocks,free_space_bytes:512*(i.blocks-i.used_blks),visible:this._theVisibleVolumeNames.includes(o),low_space_alert:a});$(`Initiating 'diskutil info' for DiskId '${c.DeviceNode}'`);const l=new T;l.on(I.EVENT_COMPLETE,this._CB_process_diskUtil_info_complete),l.Spawn({command:"diskutil",arguments:["info","-plist",c.DeviceNode],token:c}),this._pendingVolumes.push(c)}))}}else this._checkInProgress=!1,$(`Error processing '${e.source.Command} ${e.source.Arguments}'. Err:${e.result}`),this.emit("ready",{results:[]})}_on_process_diskutil_info_complete(e){V(`'${e.source.Command} ${e.source.Arguments}' Spawn Helper Result: valid:${e.valid}`),V(e.result.toString());let t=!1;if(this._checkInProgress){if(e.valid)try{if(e.token instanceof m?this._pendingVolumes.includes(e.token)?this._pendingVolumes=this._pendingVolumes.filter((t=>t!==e.token)):(this._checkInProgress=!1,t=!0,$("Unexpected call to _on_process_diskutil_info_complete. token not pending."),$(e.token)):(this._checkInProgress=!1,t=!0,$("Unexpected call to _on_process_diskutil_info_complete. token is not instance of VolumeData."),$(e.token)),!t){const r=M.parse(e.result.toString()),n=this._isVolumeShown(e.token.MountPoint);if(Object.prototype.hasOwnProperty.call(r,"DeviceIdentifier")&&"string"==typeof r.DeviceIdentifier)if(Object.prototype.hasOwnProperty.call(r,"VolumeName")&&"string"==typeof r.VolumeName&&Object.prototype.hasOwnProperty.call(r,"FilesystemType")&&"string"==typeof r.FilesystemType&&Object.prototype.hasOwnProperty.call(r,"DeviceIdentifier")&&"string"==typeof r.DeviceIdentifier&&Object.prototype.hasOwnProperty.call(r,"MountPoint")&&"string"==typeof r.MountPoint&&Object.prototype.hasOwnProperty.call(r,"DeviceNode")&&"string"==typeof r.DeviceNode&&(Object.prototype.hasOwnProperty.call(r,"VolumeUUID")&&"string"==typeof r.VolumeUUID||!Object.prototype.hasOwnProperty.call(r,"VolumeUUID"))&&Object.prototype.hasOwnProperty.call(r,"Size")&&"number"==typeof r.Size&&(Object.prototype.hasOwnProperty.call(r,"FreeSpace")&&"number"==typeof r.FreeSpace||Object.prototype.hasOwnProperty.call(r,"APFSContainerFree")&&"number"==typeof r.APFSContainerFree)){const e=r.FilesystemType===d.TYPE_APFS?r.APFSContainerFree:r.FreeSpace,t=Object.prototype.hasOwnProperty.call(r,"VolumeUUID")?r.VolumeUUID:r.DeviceNode,i=this._determineLowSpaceAlert(r.VolumeName,t,e/r.Size*100),o=new m({name:r.VolumeName,volume_type:r.FilesystemType,disk_id:r.DeviceIdentifier,mount_point:r.MountPoint,capacity_bytes:r.Size,device_node:r.DeviceNode,volume_uuid:t,free_space_bytes:e,visible:this._theVisibleVolumeNames.includes(r.VolumeName),shown:n,low_space_alert:i});this._theVolumes.push(o)}else Object.prototype.hasOwnProperty.call(r,"VolumeName")&&"string"==typeof r.VolumeName&&r.VolumeName.length>0&&$("_on_process_diskutil_info_complete: Unable to handle response from diskutil.");else if(Object.prototype.hasOwnProperty.call(r,"Error")&&"boolean"==typeof r.Error&&r.Error){const t=new m({name:e.token.Name,volume_type:e.token.VolumeType,disk_id:e.token.DeviceIdentifier,mount_point:e.token.MountPoint,capacity_bytes:e.token.Size,device_node:e.token.DeviceNode,volume_uuid:e.token.VolumeUUID,free_space_bytes:e.token.FreeSpace,visible:e.token.IsVisible,shown:n,low_space_alert:e.token.LowSpaceAlert});this._theVolumes.push(t)}else this._checkInProgress=!1,t=!0,$("Unexpected call to _on_process_diskutil_info_complete. config."),$(r)}t||this._updateCheckInProgress()}catch(e){this._checkInProgress=!1,t=!0,$(`Error processing 'diskutil info'. Err:${e}`)}else this._checkInProgress=!1,t=!0,$(`Error processing '${e.source.Command} ${e.source.Arguments}'. Err:${e.result}`);t&&this.emit("ready",{results:[]})}}_on_process_disk_utilization_stats_complete(e){if(V(`'${e.source.Command} ${e.source.Arguments}' Spawn Helper Result: valid:${e.valid}`),!this._checkInProgress)return;const t=e.source.Result.toString().split("\r");for(const r of t){const t=r.split("\t");if(2!==t.length)throw this._checkInProgress=!1,$(`Unable to paese '${e.source.Command} ${e.source.Arguments}' results`),Error(`Unable to paese '${e.source.Command} ${e.source.Arguments}' results`);{const e=m.ConvertFrom1KBlockaToBytes(Number.parseInt(t[0],10)),r=t[1].trim();if($(`du results: Name:${r} Used:${m.ConvertFromBytesToGB(e)} raw:${Number.parseInt(t[0],10)}`),!this._pendingVolumes.includes(r))throw this._checkInProgress=!1,$(`Unexpected call to _on_process_disk_utilization_stats_complete. mount_point:${t[1]}`),new Error(`Unexpected call to _on_process_disk_utilization_stats_complete. mount_point:${t[1]}`);{let t;this._pendingVolumes=this._pendingVolumes.filter((e=>e!==r));const n=this._theVolumes.filter(((e,n)=>{const i=e.MountPoint===r;return i&&(t=n),i}));if(void 0===n||1!==n.length||t<this._theVolumes.length)throw this._checkInProgress=!1,$("Unable to identify unique volumeData item."),new Error("Unable to identify unique volumeData item.");const i=new m({name:n[0].Name,volume_type:n[0].VolumeType,disk_id:n[0].DiskId,mount_point:n[0].MountPoint,capacity_bytes:n[0].Size,device_node:n[0].DeviceNode,volume_uuid:n[0].VolumeUUID,free_space_bytes:n[0].FreeSpace,visible:n[0].IsVisible,low_space_alert:n[0].LowSpaceAlert,used_space_bytes:e});this._theVolumes[t]=i,this._updateCheckInProgress()}}}}_partitionDiskIdentifiers(e){if(void 0===e||!Array.isArray(e))throw new TypeError("disk must be an array");const t=[];for(const r of e){if(!(Object.prototype.hasOwnProperty.call(r,"Partitions")&&r.Partitions.length>0))throw $("_partitionDiskIdentifiers(): drive is not as expected. No partitions."),new TypeError("drive is not as expected. No partitions.");for(const e of r.Partitions){if(!Object.prototype.hasOwnProperty.call(e,"DeviceIdentifier")||"string"!=typeof e.DeviceIdentifier)throw $("_partitionDiskIdentifiers(): partition is not as expected. Missing or Invalid Disk Identifier."),new TypeError("partition is not as expected. Missing or Invalid Disk Identifier.");t.push(e.DeviceIdentifier)}}return t}_apfsDiskIdentifiers(e){if(void 0===e||!Array.isArray(e))throw new TypeError("containers must be an array");const t=[];for(const r of e){if(!Object.prototype.hasOwnProperty.call(r,"APFSVolumes")||!Array.isArray(r.APFSVolumes))throw $("_apfsDiskIdentifiers(): volume is not as expected. (AFPS)"),new TypeError("volume is not as expected. (AFPS)");for(const e of r.APFSVolumes){if(!Object.prototype.hasOwnProperty.call(e,"DeviceIdentifier")||"string"!=typeof e.DeviceIdentifier)throw $("_apfsDiskIdentifiers(): volume is not as expected. Missing or Invalid Disk Identifier."),new TypeError("volume is not as expected. Missing or Invalid Disk Identifier.");t.push(e.DeviceIdentifier)}}return t}}const z=s("vi_process"),q=s("vi_config");z.log=console.log.bind(console),q.log=console.log.bind(console);const W=/\s+/;class Y extends R{constructor(e){const t=process.platform;if(void 0===t||"string"!=typeof t||t.length<=0||"linux"!==t.toLowerCase())throw new Error(`Operating system not supported. os:${t}`);super(e),this._dfSpawnInProgress=!1,this._CB__display_free_disk_space_complete=this._on_df_complete.bind(this)}_initiateInterrogation(){this._dfSpawnInProgress=!0;const e=new T;e.on(I.EVENT_COMPLETE,this._CB__display_free_disk_space_complete),e.Spawn({command:"df",arguments:["--block-size=512","--portability","--print-type","--exclude-type=tmpfs","--exclude-type=devtmpfs"]})}_doReset(){this._dfSpawnInProgress=!1}get _isCheckInProgress(){return this._dfSpawnInProgress}get _watchFolders(){const{username:e}=(0,l.userInfo)();return z(`Username: ${e}`),[`/media/${e}`,"/mnt"]}_on_df_complete(e){if(q(`'${e.source.Command} ${e.source.Arguments}' Spawn Helper Result: valid:${e.valid}`),q(e.result.toString()),void 0!==e.token&&(q("Spawn Token:"),q(e.token)),this._dfSpawnInProgress=!1,this._checkInProgress)if(e.valid&&void 0!==e.result){const t=1,r=-1;e.result.toString().split("\n").slice(t,r).forEach((e=>{const t=e.split(W),r=t.slice(6,t.length);t[6]=r.join(" ");const n={device_node:t[0].toLowerCase(),fs_type:t[1],blocks:Number.parseInt(t[2],10),used_blks:Number.parseInt(t[3],10),avail_blks:Number.parseInt(t[4],10),capacity:Number.parseInt(t[5].slice(0,-1),10),mount_point:t[6]};if(Object.values(d).includes(n.fs_type)){let e=n.mount_point;const t=n.mount_point.split("/");t.length>0&&t[t.length-1].length>0&&(e=t[t.length-1]);const r=this._determineLowSpaceAlert(e,"~~ not used ~~",n.avail_blks/n.blocks*100),i=new m({name:e,volume_type:n.fs_type,mount_point:n.mount_point,volume_uuid:"unknown",device_node:n.device_node,capacity_bytes:512*n.blocks,free_space_bytes:512*(n.blocks-n.used_blks),visible:!0,shown:this._isVolumeShown(n.mount_point),low_space_alert:r});this._theVolumes.push(i)}})),this._updateCheckInProgress()}else this._checkInProgress=!1,z(`Error processing '${e.source.Command} ${e.source.Arguments}'. Err:${e.result}`),this.emit("ready",{results:[]})}}const H=s("homebridge"),Z={Switch:0},G={CONTROLS:{uuid:"2CF5A6C7-8041-4805-8582-821B19589D60",model:"Control Switches",serial_num:"00000001",service_list:{MANUAL_REFRESH:{type:Z.Switch,name:"Refresh",uuid:"23CB97AC-6F0C-46B5-ACF6-78025632A11F",udst:"ManualRefresh"},PURGE_OFFLINE:{type:Z.Switch,name:"Purge",uuid:"FEE232D5-8E25-4C1A-89AC-5476B778ADEF",udst:"PurgeOffline"}}}},K=process.platform,X="homebridge-grumptech-volmon",J="GrumpTechVolumeMonitorPlatform";let Q,ee;class te{constructor(e,t,r){let n;this._log=e,this._config=t,this._api=r,this._name=this._config.name;const i={};if(Object.prototype.hasOwnProperty.call(this._config,"settings")&&(n=this._config.settings),void 0!==n){if(Object.prototype.hasOwnProperty.call(n,"polling_interval")){if("number"!=typeof n.polling_interval)throw new TypeError(`Configuration item 'polling_interval' must be a number. {${typeof n.polling_interval}}`);i.period_hr=n.polling_interval}if(Object.prototype.hasOwnProperty.call(n,"alarm_threshold")){if("number"!=typeof n.alarm_threshold)throw new TypeError(`Configuration item 'alarm_threshold' must be a number. {${typeof n.alarm_threshold}}`);i.default_alarm_threshold=n.alarm_threshold}if(Object.prototype.hasOwnProperty.call(n,"exclusion_masks")){if(!Array.isArray(n.exclusion_masks))throw new TypeError(`Configuration item 'exclusion_masks' must be an array of strings. {${typeof n.exclusion_masks}}`);{let e=!0;for(const t of n.exclusion_masks)e=e&&"string"==typeof t;e&&(i.exclusion_masks=n.exclusion_masks)}}if(Object.prototype.hasOwnProperty.call(n,"enable_volume_customizations")){if("boolean"!=typeof n.enable_volume_customizations)throw new TypeError(`Configuration item 'enable_volume_customizations' must be a boolean. {${typeof n.enable_volume_customizations}}`);n.enable_volume_customizations&&Object.prototype.hasOwnProperty.call(n,"volume_customizations")&&Array.isArray(n.volume_customizations)&&(i.volume_customizations=n.volume_customizations)}}try{switch(K.toLowerCase()){case"darwin":this._volumeInterrogator=new U(i);break;case"linux":this._volumeInterrogator=new Y(i);break;default:this._volumeInterrogator=void 0,this._log(`Operating system not supported. os:${K}`)}}catch(e){this._volumeInterrogator=void 0,this._log(`Unable to create the VolumeInterrogator. err:'${e.message}`)}this._bindDoInitialization=this._doInitialization.bind(this),this._bindDestructorNormal=this._destructor.bind(this,{cleanup:!0}),this._bindDestructorAbnormal=this._destructor.bind(this,{exit:!0}),this._CB_VolumeIterrrogatorScanning=this._handleVolumeInterrogatorScanning.bind(this),this._CB_VolumeIterrrogatorReady=this._handleVolumeInterrogatorReady.bind(this),this._log("Creating VolumeInterrogatorPlatform"),this._accessories=new Map,this._volumesData=new Map,this._api.on("didFinishLaunching",this._bindDoInitialization),this._api.on("shutdown",this._bindDestructorNormal),process.on("exit",this._bindDestructorNormal),process.on("uncaughtException",this._bindDestructorAbnormal),void 0!==this._volumeInterrogator&&(this._volumeInterrogator.on("scanning",this._CB_VolumeIterrrogatorScanning),this._volumeInterrogator.on("ready",this._CB_VolumeIterrrogatorReady))}async _destructor(e,t){(e.exit||e.cleanup)&&void 0!==this._volumeInterrogator&&(this._log.debug("Terminating the volume interrogator."),this._log.debug(t),this._volumeInterrogator.removeListener("scanning",this._CB_VolumeIterrrogatorScanning),this._volumeInterrogator.removeListener("ready",this._CB_VolumeIterrrogatorReady),await this._volumeInterrogator.Terminate(),this._volumeInterrogator=void 0)}async _doInitialization(){if(this._log(`Homebridge Plug-In ${J} has finished launching.`),void 0===this._volumeInterrogator)return void this._log("Volume Interrogator not set.");let e;if(Object.prototype.hasOwnProperty.call(this._config,"settings")&&(e=this._config.settings),void 0!==e){if(!Object.prototype.hasOwnProperty.call(e,"polling_interval")||"number"!=typeof e.polling_interval)throw new TypeError(`Configuration item 'polling_interval' must be a number. {${typeof e.polling_interval}}`);if(!(e.polling_interval>=this._volumeInterrogator.MinimumPeriod&&e.polling_interval<=this._volumeInterrogator.MaximumPeriod))throw new RangeError(`Configuration item 'polling_interval' must be between ${this._volumeInterrogator.MinimumPeriod} and ${this._volumeInterrogator.MaximumPeriod}. {${e.polling_interval}}`);this._volumeInterrogator.Period=e.polling_interval}const t=[];for(const e of this._accessories.values())Object.prototype.hasOwnProperty.call(e.context,"VERSION")&&2===e.context.VERSION||(this._log(`Accessory ${e.displayName} has accessory version ${e.context.VERSION}. Version 2 is expected.`),t.push(e));if(t.forEach((e=>{this._removeAccessory(e)})),!this._accessories.has(G.CONTROLS.model)){const e=new Q(G.CONTROLS.model,G.CONTROLS.uuid);e.context.ID=G.CONTROLS.model,e.context.VERSION=2,e.context.SETTINGS={SwitchStates:[{id:G.CONTROLS.service_list.MANUAL_REFRESH.uuid,state:!0},{id:G.CONTROLS.service_list.PURGE_OFFLINE.uuid,state:!1}]};for(const t of Object.values(G.CONTROLS.service_list)){const r=this._getAccessoryServiceType(t.type),n=e.addService(r,t.uuid,t.udst);void 0!==n&&n.updateCharacteristic(ee.Characteristic.Name,`${t.name}`)}this._updateAccessoryInfo(e,{model:G.CONTROLS.model,serialnum:G.CONTROLS.serial_num}),this._configureAccessory(e),this._api.registerPlatformAccessories(X,J,[e])}this._volumeInterrogator.Start()}configureAccessory(e){if(void 0===e||!(e instanceof Q))throw new TypeError("accessory must be a PlatformAccessory");let t=!1;for(const r of this._accessories.values())if(r===e){t=!0;break}if(!t)try{this._configureAccessory(e)}catch(t){this._log(`Unable to configure accessory ${e.displayName}. Version:${e.context.VERSION}. Error:${t}`),this._accessories.set(e.displayName,e)}}_handleVolumeInterrogatorScanning(){setImmediate((()=>{this._log.debug("Scanning initiated.");const e=this._accessories.get(G.CONTROLS.model);if(void 0!==e){const t=e.getService(G.CONTROLS.service_list.MANUAL_REFRESH.udst);void 0!==t?this._getAccessorySwitchState(t)?this._log.debug("Refresh switch is already On."):(this._log.debug("Setting Refresh switch On."),t.updateCharacteristic(ee.Characteristic.On,!0)):this._log.debug("Unable to find Manual Refresh service.")}else this._log.debug("Unable to find CONTROLS accessory")}))}_handleVolumeInterrogatorReady(e){setImmediate((e=>{if(void 0===e||!Object.prototype.hasOwnProperty.call(e,"results"))throw new TypeError("'data' needs to be an object with a 'results' field.");if(!Array.isArray(e.results))throw new TypeError("'data.results' needs to be an array of VolumeData objects.");for(const t of e.results)if(!(t instanceof m))throw new TypeError("'results' needs to be an array of VolumeData objects.");for(const t of e.results)t.IsMounted&&this._log.debug(`\tName:${t.Name.padEnd(20," ")}\tVisible:${t.IsVisible}\tShown:${t.IsShown}\tSize:${m.ConvertFromBytesToGB(t.Size).toFixed(4)} GB\tUsed:${(t.UsedSpace/t.Size*100).toFixed(2)}%\tMnt:${t.MountPoint}`),this._volumesData.set(t.Name,t);for(const e of this._volumesData.values())try{const t=this._accessories.has(e.Name);e.IsShown&&!t&&this._addBatteryServiceAccessory(e.Name);const r=this._accessories.get(e.Name);void 0!==r&&this._updateBatteryServiceAccessory(r)}catch(t){this._log.debug(`Error when managing accessory: ${e.Name}`)}const t=this._accessories.get(G.CONTROLS.model);if(void 0!==t){const r=t.getServiceById(G.CONTROLS.service_list.PURGE_OFFLINE.uuid,G.CONTROLS.service_list.PURGE_OFFLINE.udst);if(void 0!==r&&this._getAccessorySwitchState(r)){const t=[];for(const r of this._volumesData.values()){const n=e.results.find((e=>e.Name===r.Name));!this._accessories.has(r.Name)||r.IsShown&&void 0!==n||t.push(this._accessories.get(r.Name))}const r=[G.CONTROLS.model];for(const e of this._accessories.keys())this._volumesData.has(e)||-1!==r.indexOf(e)||t.push(this._accessories.get(e));t.forEach((e=>{this._volumesData.delete(e.displayName),this._removeAccessory(e)}))}const n=t.getServiceById(G.CONTROLS.service_list.MANUAL_REFRESH.uuid,G.CONTROLS.service_list.MANUAL_REFRESH.udst);void 0!==n&&this._getAccessorySwitchState(n)&&n.updateCharacteristic(ee.Characteristic.On,!1)}const r=[];for(const e of this._accessories.values())r.push(e);r.length>0&&this._api.updatePlatformAccessories(r)}),e)}_addBatteryServiceAccessory(e){if(void 0===e||"string"!=typeof e)throw new TypeError("name must be a string");if(e.length<=0)throw new RangeError("name must be a non-zero length string.");if(this._accessories.has(e))throw new Error(`Accessory '${e}' is already registered.`);this._log.debug(`Adding new accessory: name:'${e}'`);const t=ee.uuid.generate(e),r=new Q(e,t);r.addService(ee.Service.BatteryService,e),r.context.VERSION=2;try{this._configureAccessory(r)}catch(e){this._log.debug("Error when configuring accessory.")}this._api.registerPlatformAccessories(X,J,[r])}_configureAccessory(e){if(void 0===e||!(e instanceof Q))throw new TypeError("accessory must be a PlatformAccessory");let t;this._log.debug(`Configuring accessory ${e.displayName}`),e.on(Q.PlatformAccessoryEvent.IDENTIFY,(()=>{this._log(`${e.displayName} identified!`)}));const r=e.context.SETTINGS;void 0!==r&&"object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"SwitchStates")&&Array.isArray(r.SwitchStates)&&(t=r.SwitchStates);for(const r of e.services)if(r instanceof ee.Service.Switch){let n=!0;if(Array.isArray(t))for(const e of t)if("object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"id")&&"string"==typeof e.id&&Object.prototype.hasOwnProperty.call(e,"state")&&"boolean"==typeof e.state&&e.id===r.displayName){n=e.state;break}r.updateCharacteristic(ee.Characteristic.On,n);const i=r.getCharacteristic(ee.Characteristic.On),o=`${r.displayName}.${r.subtype}`;i.on("get",this._handleOnGet.bind(this,{accessory:e,service_id:o})),i.on("set",this._handleOnSet.bind(this,{accessory:e,service_id:o}))}this._accessories.has(e.displayName)||(this._log.debug(`Adding accessory '${e.displayName} to the accessories list. Count:${this._accessories.size}`),this._accessories.set(e.displayName,e))}_removeAccessory(e){if(void 0===e||!(e instanceof Q))throw new TypeError("Accessory must be a PlatformAccessory");if(!this._accessories.has(e.displayName))throw new RangeError(`Accessory '${e.displayName}' is not registered.`);this._log.debug(`Removing accessory '${e.displayName}'`),e.removeAllListeners(Q.PlatformAccessoryEvent.IDENTIFY);for(const t of e.services)if(t instanceof ee.Service.Switch){const r=t.getCharacteristic(ee.Characteristic.On),n=`${t.displayName}.${t.subtype}`;r.off("get",this._handleOnGet.bind(this,{accessory:e,service_id:n})),r.off("set",this._handleOnSet.bind(this,{accessory:e,service_id:n}))}this._api.unregisterPlatformAccessories(X,J,[e]),this._accessories.delete(e.displayName)}_updateBatteryServiceAccessory(e){if(void 0===e||!(e instanceof Q))throw new TypeError("Accessory must be a PlatformAccessory");this._log.debug(`Updating accessory '${e.displayName}'`);const t=new Error(`Volume '${e.displayName} is not reachable.`);let r=t,n=t,i=t,o=t,s=t;if(this._volumesData.has(e.displayName)){const t=this._volumesData.get(e.displayName);t.IsShown&&(r=t.PercentFree.toFixed(0),n=t.LowSpaceAlert,i=ee.Characteristic.ChargingState.NOT_CHARGEABLE),o=t.VolumeType,s=t.VolumeUUID}const a=e.getService(ee.Service.BatteryService);void 0!==a&&(a.updateCharacteristic(ee.Characteristic.ChargingState,i),a.updateCharacteristic(ee.Characteristic.BatteryLevel,r),a.updateCharacteristic(ee.Characteristic.StatusLowBattery,n)),this._updateAccessoryInfo(e,{model:o,serialnum:s})}_updateAccessoryInfo(e,t){if(void 0===e||!(e instanceof Q))throw new TypeError("Accessory must be a PlatformAccessory");if(void 0===t||!Object.prototype.hasOwnProperty.call(t,"model")||"string"!=typeof t.model||t.model instanceof Error||!Object.prototype.hasOwnProperty.call(t,"serialnum")||"string"!=typeof t.serialnum||t.serialnum instanceof Error)throw new TypeError("info must be an object with properties named 'model' and 'serialnum' that are either strings or Error");const r=e.getService(ee.Service.AccessoryInformation);void 0!==r&&(r.updateCharacteristic(ee.Characteristic.Manufacturer,"GrumpTech"),r.updateCharacteristic(ee.Characteristic.Model,t.model),r.updateCharacteristic(ee.Characteristic.SerialNumber,t.serialnum))}_handleOnGet(e,t){if(void 0===e||"object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"accessory")||!Object.prototype.hasOwnProperty.call(e,"service_id"))throw new TypeError("event_info must be an object with an 'accessory' and 'service_id' field.");if(void 0===e.accessory||!(e.accessory instanceof Q))throw new TypeError("'event_info.accessory' must be a PlatformAccessory");if(void 0===e.service_id||"string"!=typeof e.service_id||e.service_id.length<=0)throw new TypeError("'event_info.service_id' must be non-null string.");const r=e.service_id.split(".");if(!Array.isArray(r)||2!==r.length)throw new TypeError(`'event_info.service_id' does not appear to be valid. '${e.service_id}'`);const n=e.accessory.getServiceById(r[0],r[1]);if(void 0===n)throw new RangeError("'event_info.service_id' does not belong to event_info.accessory.");if(!(n instanceof ee.Service.Switch))throw new TypeError("'event_info.service_id' must correspond to a switch service.");this._log.debug(`Switch '${e.accessory.displayName}-${n.displayName}.${n.subtype}' Get Request.`);let i,o=null;try{i=this._getAccessorySwitchState(n)}catch(t){this._log.debug(`  Unexpected error encountered: ${t.message}`),i=!1,o=new Error(`Accessory ${e.accessory.displayName} is not ressponding.`)}t(o,i)}_handleOnSet(e,t,r){if(void 0===e||"object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"accessory")||!Object.prototype.hasOwnProperty.call(e,"service_id"))throw new TypeError("event_info must be an object with an 'accessory' and 'service_id' field.");if(void 0===e.accessory||!(e.accessory instanceof Q))throw new TypeError("'event_info.accessory' must be a PlatformAccessory");if(void 0===e.service_id||"string"!=typeof e.service_id||e.service_id.length<=0)throw new TypeError("'event_info.service_id' must be non-null string.");const n=e.service_id.split(".");if(!Array.isArray(n)||2!==n.length)throw new TypeError(`'event_info.service_id' does not appear to be valid. '${e.service_id}'`);const i=e.accessory.getServiceById(n[0],n[1]);if(void 0===i)throw new RangeError("'event_info.service_id' does not belong to event_info.accessory.");if(!(i instanceof ee.Service.Switch))throw new TypeError("'event_info.service_id' must correspond to a switch service.");let o;this._log.debug(`Switch '${e.accessory.displayName}-${i.displayName}.${i.subtype}' Set Request. New state:${t}`);const s=e.accessory.context.SETTINGS;if(void 0!==s&&"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"SwitchStates")&&Array.isArray(s.SwitchStates))for(const e of s.SwitchStates)e.id===i.displayName&&(o=e);let a=null,c=t;try{if(n[0]===G.CONTROLS.service_list.MANUAL_REFRESH.uuid&&n[1]===G.CONTROLS.service_list.MANUAL_REFRESH.udst){const r=this._getAccessorySwitchState(i);!t&&r?(this._log.debug(`Unable to turn the '${e.accessory.displayName}' switch off.`),a=new Error(`Unable to turn the '${e.accessory.displayName}' switch off.`),setImmediate(((e,t)=>{void 0!==i&&(this._log.debug(`Switch '${i.displayName}' Restoring state ${t}`),i.updateCharacteristic(ee.Characteristic.On,t))}),e,r),c=r):t&&this._volumeInterrogator.Start()}}catch(t){this._log.debug(`  Unexpected error encountered: ${t.message}`),a=new Error(`Accessory ${e.accessory.displayName} is not ressponding.`)}void 0!==o&&(o.state=c),r(a)}_getAccessorySwitchState(e){if(void 0===e||!(e instanceof ee.Service.Switch))throw new TypeError("'switchService' must be a _hap.Service.Switch");let t=!1;const r=e.getCharacteristic(ee.Characteristic.On);if(void 0===r)throw new Error(`The '${e.displayName}.${e.udst}' service  does not have an On charactristic.`);return t=r.value,t}_getAccessoryServiceType(e){if(void 0===e||"number"!=typeof e||Object.values(Z).indexOf(e)<0)throw new TypeError(`service_type not a member of FIXED_ACCESSORY_SERVICE_TYPES. ${e}`);let t;if(e!==Z.Switch)throw new Error(`This cannot happen !! service_type=${e}`);return t=ee.Service.Switch,t}}const re=e=>{if(H(`homebridge API version: v${e.version}`),Q=e.platformAccessory,!Object.prototype.hasOwnProperty.call(Q,"PlatformAccessoryEvent")){const e={IDENTIFY:"identify"};Q.PlatformAccessoryEvent=e}ee=e.hap,H(`Registering platform: ${J}`),e.registerPlatform(J,te)}})();var l=c.Z;export{l as default};